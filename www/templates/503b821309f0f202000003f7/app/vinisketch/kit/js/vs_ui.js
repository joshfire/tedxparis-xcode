/*


 The code include code from :

 Copyright (c) 2009 Matteo Spinelli, http://cubiq.org/
 Released under MIT license
 http://cubiq.org/dropbox/mit-license.txt
 Version 3.4.5 - Last updated: 2010.07.04
*/
define("vs_ui",["vs","vs_util","vs_core"],function(I,f,g){function Y(a){this._str=a}function Z(a,b){if(!a.getAttribute)return!1;if(a.getAttribute("x-hag-ref")===b||a.getAttribute("x-hag-comp")===b)return a;for(var c=a.firstElementChild,e;c;){if(e=Z(c,b))return e;c=c.nextElementSibling}return!1}function h(a){this.parent=g.EventSource;this.parent(a);this.constructor=h}function aa(a,b,c,e){this.dir=a;this.fade=c;this.shrink=e;this.id=g.createId();this.bar=document.createElement("div");this.bar.className=
"scrollbar "+a;this.wrapper=document.createElement("div");this.wrapper.className="wrapper_scrollbar "+a;this.wrapper.style.position="absolute";this.wrapper.style["-webkit-mask"]="-webkit-canvas("+this.id+")";this.wrapper.style["-webkit-transition-duration"]=c?"300ms":"0";this.wrapper.appendChild(this.bar);b.appendChild(this.wrapper);"horizontal"===this.dir?(a=this.wrapper.offsetWidth,b=document.getCSSCanvasContext("2d",this.id,a,5),b.fillStyle="rgb(0,0,0)",b.beginPath(),b.arc(2.5,2.5,2.5,Math.PI/
2,-Math.PI/2,!1),b.lineTo(a-2.5,0),b.arc(a-2.5,2.5,2.5,-Math.PI/2,Math.PI/2,!1)):(a=this.wrapper.offsetHeight,b=document.getCSSCanvasContext("2d",this.id,5,a),b.fillStyle="rgb(0,0,0)",b.beginPath(),b.arc(2.5,2.5,2.5,Math.PI,0,!1),b.lineTo(5,a-2.5),b.arc(2.5,a-2.5,2.5,0,Math.PI,!1));b.closePath();b.fill()}function L(a){window.scrollTo(0,0);if(!("touchstart"==a.type&&("INPUT"==a.target.tagName||"input"==a.target.tagName||"TEXTAREA"==a.target.tagName||"textarea"==a.target.tagName)))return a.preventDefault(),
!1}function M(a){this.parent=h;this.parent(a);this.constructor=M}function j(a){this.parent=h;this.parent(a);this.constructor=j;this.__ab_view_t_o=[50,50];f.extend(this,ja)}function v(a){this.parent=j;this.parent(a);this.constructor=v}function N(a){this.parent=h;this.parent(a);this.constructor=N}function w(a){this.parent=h;this.parent(a);this.constructor=w}function D(a){this.parent=h;this.parent(a);this.constructor=D}function T(){this.parent=J;this.parent();this.constructor=J}function W(a){this.parent=
h;this.parent(a);this.constructor=W}function ba(a,b,c,e){for(var x=document.createElement("li"),y=document.createElement("div"),d=document.createElement("ul"),h,E=a._model;c<E.length;){h=E.item(c);if(f.isString(h))break;h=E.item(c);a.__template_obj?listItem=a.__template_obj.clone():(listItem=new T,listItem.init());h instanceof g.Model?listItem.link(h):listItem.configure(h);listItem.index=c;e&&listItem.view.addEventListener(g.POINTER_START,a);d.appendChild(listItem.view);a.__item_obs.push(listItem);
listItem.__parent=a;c++}b&&(a=window.deviceConfiguration.os,a==o.OS_MEEGO||a==o.OS_SYMBIAN?(y.appendChild(document.createElement("div")),a=document.createElement("div"),a.appendChild(document.createTextNode(b)),y.appendChild(a)):f.setElementInnerText(y,b),x.appendChild(y));0<d.childElementCount&&x.appendChild(d);return[x,c]}function la(a){if(this._model){var b=this._list_items,c,e,x;if(b){this._freeListItems();b.innerHTML="";s?m(b,"translate3d(0,0,0)"):m(b,"translate(0,0)");this.view.removeChild(b);
c=0;for(f.setElementVisibility(b,!1);c<this._model.length;)e=this._model.item(c),x=null,f.isString(e)&&(x=e,c++),c=ba(this,x,c,a),b.appendChild(c[0]),c=c[1];this.view.appendChild(b);b.style.width="auto";f.setElementVisibility(b,!0)}}}function ma(a){if(this._model){var b=this._list_items,c=this._direct_access,e,x,y;if(b){this._freeListItems();b.innerHTML="";c.innerHTML="";s?f.setElementTransform(b,"translate3d(0,0,0)"):f.setElementTransform(b,"translate(0,0)");this.view.removeChild(b);this.view.removeChild(c);
e=0;f.setElementVisibility(b,!1);for(var d=0;e<this._model.length;)x=this._model.item(e),y=null,f.isString(x)&&(y=x,e++,x=document.createElement("div"),x.innerHTML=y[0],x._index_=d++,c.appendChild(x)),e=ba(this,y,e,a),b.appendChild(e[0]),e=e[1];this.view.appendChild(b);this.view.appendChild(c);b.style.width="auto";f.setElementVisibility(b,!0)}}}function ca(a){if(this._model){var b=this._list_items,c,e;if(b){this._freeListItems();b.innerHTML="";s?m(b,"translate3d(0,0,0)"):m(b,"translate(0,0)");this.view.removeChild(b);
c=0;for(f.setElementVisibility(b,!1);c<this._model.length;)e=this._model.item(c),this.__template_obj?listItem=this.__template_obj.clone():(listItem=new T,listItem.init()),e instanceof g.Model?listItem.link(e):listItem.configure(e),listItem.index=c,a&&listItem.view.addEventListener(g.POINTER_START,this),b.appendChild(listItem.view),this.__item_obs.push(listItem),listItem.__parent=this,c++;this.view.appendChild(b);b.style.width="auto";f.setElementVisibility(b,!0)}}}function t(a){this.parent=D;this.parent(a);
this.constructor=t;this.__item_obs=[]}function z(a){this._data=[];this._items={};this.parent=h;this.parent(a);this.constructor=z}function O(a){this._items=[];this.parent=D;this.parent(a);this.constructor=O}function P(a){this._items=[];this.parent=D;this.parent(a);this.constructor=P;this._selected_indexes=[]}function G(a){this.parent=h;this.parent(a);this.constructor=G;this._states={}}function d(a){this.parent=h;this.parent(a);this.constructor=d;this._items={}}function Q(a){this.parent=h;this.parent(a);
this.constructor=Q}function A(a){this.parent=h;this.parent(a);this.constructor=A}function B(a){this.parent=h;this.parent(a);this.constructor=B;this._range=[0,100]}function H(a){this.parent=h;this.parent(a);this.constructor=H;this._range=[0,100]}function R(a){this.parent=h;this.parent(a);this.constructor=R}function C(a){this.parent=h;this.parent(a);this.constructor=C}function r(a){this.parent=h;this.parent(a);this.constructor=r}function n(a){this.parent=h;this.parent(a);this.constructor=n}function k(a){this.parent=
h;this.parent(a);this.constructor=k}function S(a){this.parent=h;this.parent(a);this.constructor=S}function K(a){this.parent=h;this.parent(a);this.constructor=K}var p=I.ui,m=f.setElementTransform,da=f.getElementTransform,o=g.DeviceConfiguration,s=I.SUPPORT_3D_TRANSFORM;Y.prototype={_str:null,_regexp_templ:/\$\{([\w\-]+)(\.([\w\.]*)+)?\}/g,_regexp_index:/\$\{\*([\d]+)\*\}/g,toString:function(){return this._str},compileView:function(a){var b=this._compile();if(a){for(var a=a.split("."),c=window;c&&a.length;)c=
c[a.shift()];a=c}else a=null;I.util.isFunction(a)||(a=I.ui.View);b=new a({node:b});this._addPropertiesToObject(b);b.init();return b},_compile:function(){function a(c){function e(f){if(f)for(var y=f.length;y--;){var d=f.item(y);if(3===d.nodeType){var g=d.data;d.data="";b._regexp_index.lastIndex=0;for(var h=b._regexp_index.exec(g),k=0;h;){if(h.index){var j=document.createTextNode(g.substring(k,h.index));c.insertBefore(j,d)}b.__prop_nodes[parseInt(h[1],10)]=d;k=h.index+h[0].length;if(h=b._regexp_index.exec(g))j=
document.createTextNode(""),d.nextSibling?c.insertAfter(j,d.nextSibling):c.appendChild(j),d=j}j=document.createTextNode(g.substring(k));c.insertBefore(j,d)}else if(2===d.nodeType){if(b._regexp_index.lastIndex=0,h=b._regexp_index.exec(d.value))b.__prop_nodes[parseInt(h[1],10)]=d,d.value=""}else 1===d.nodeType&&a(d)}}e(c.childNodes);e(c.attributes)}this.__properties=[];this.__properties_path=[];this.__prop_nodes=[];var b=this;b._regexp_templ.lastIndex=0;var c=b._str.replace(b._regexp_templ,function(a,
c,e,f){a=b.__properties.length;b.__properties.push(c);f?b.__properties_path.push(f.split(".").shift()):b.__properties_path.push(null);return"${*"+a+"*}"}),e;if(DOMParser&&(doc=(new DOMParser).parseFromString(c,"text/html")))doc_elem=doc.documentElement,doc_elem instanceof HTMLElement&&(e=document.importNode(doc_elem,!0));e||(e=document.createElement("div"),e.innerHTML=c,(e=e.firstElementChild)&&e.parentElement.removeChild(e));a(e);return e},_addPropertiesToObject:function(a){for(var b=[],c=this.__properties.length;c--;){var e=
this.__properties[c],f=this.__properties_path[c],d=this.__prop_nodes[c];d&&(b.push([e,d]),ea(a,e,d,f))}a._clone=na;a.__node__ref__=b},apply:function(a){function b(b,e,f,d){b=a[e];if(d){d=d.split(".");for(e=0;b&&e<d.length;)b=b[d[e++]]}return b}return!a?this._str:this._str.replace(this._regexp_templ,b)}};var ea=function(a,b,c,e){var f={};3===c.nodeType?(f.set=function(a,b){return function(c){this[b]=c;a.data=c;this.propertyChange(b)}}(c,"_"+b,e),f.get=function(a,b){return function(){this[b]=a.data;
return this[b]}}(c,"_"+b)):2===c.nodeType&&(f.set=function(a,b){return function(c){this[b]=c;a.value=c;this.propertyChange(b)}}(c,"_"+b,e),f.get=function(a,b){return function(){this[b]=a.value;return this[b]}}(c,"_"+b));I.util.defineProperty(a,b,f)},na=function(a,b){I.ui.View.prototype._clone.call(this,a,b);var c=a.view,e=this.__node__ref__,f=[],d;if(c&&e&&e.length)for(var g=e.length;g--;){d=e[g];var h=d[0];d=$(this.view,d[1]);d=fa(c,d);f.push([h,d]);ea(a,h,d);a.__node__ref__=f}},$=function(a,b,c){var e=
1,c=c||[];if(2===b.nodeType)return b.ownerElement&&(c=$(a,b.ownerElement,c)),c.push([2,b.nodeName.toLowerCase()]),c;if(a===b)return c;b.parentNode&&(c=$(a,b.parentNode,c));for(a=b.previousSibling;a;)(1===a.nodeType||3===a.nodeType)&&a.nodeName==b.nodeName&&e++,a=a.previousSibling;c.push([1,b.nodeName.toLowerCase(),e]);return c},fa=function(a,b){if(!b||!b.length||!a)return a;var c=b.shift(),e,f;e=c[0];var d=c[1];if(2===e){e=a.attributes;for(c=e.length;c--;)if(f=e.item(c),f.nodeName.toLowerCase()==
d)return f}else if(1===e){e=a.firstChild;for(c=c[2],f=1;e;){if(e.nodeName.toLowerCase()===d){if(c===f)return fa(e,b);f++}e=e.nextSibling}}return null};I.ui.Template=Y;h.DEFAULT_LAYOUT=null;h.HORIZONTAL_LAYOUT="horizontal_layout";h.VERTICAL_LAYOUT="vertical_layout";h.ABSOLUTE_LAYOUT="absolute_layout";h.FLOW_LAYOUT="flow_layout";h.SELECT_DELAY=150;h.UNSELECT_DELAY=300;h.MOVE_THRESHOLD=20;h.NON_G_OBJECT="_non_g_object";h.ANY_PLACE="children";h._positionStyle=void 0;h.__comp_templates={};h._propagate_pointer_event=
function(a,b,c){var e="";c.type===g.POINTER_START&&(e="POINTER_START");c.type===g.POINTER_END&&(e="POINTER_END");c.type===g.POINTER_MOVE&&(e="POINTER_MOVE");c.type=e;b.call(a,c)};h.prototype={_visible:!0,_autosizing:null,_pointerevent_handlers:null,_enable:!0,_pos:null,__view_t_x:0,__view_t_y:0,_size:null,_scaling:1,_rotation:0,_min_scale:0.5,_max_scale:3,_layout:null,_transform_origin:null,_show_animation:null,__show_clb:null,_hide_animation:null,__hide_clb:null,destructor:function(){var a,b,c,e;
this.__parent&&this.__parent.remove(this);for(a in this._children)if(b=this._children[a]){if(b instanceof Array)for(c=0;c<b.length;c++)e=b[c],f.free(e);else f.free(b);delete this._children[a]}this._children={};delete this.view;g.EventSource.prototype.destructor.call(this)},refresh:function(){var a,b,c,e;for(a in this._children)if(b=this._children[a])if(b instanceof Array)for(c=0;c<b.length;c++)(e=b[c])&&e.refresh&&e.refresh();else b.refresh&&b.refresh()},clone:function(a,b){a||(a={});a.node||(a.node=
this.view.cloneNode(!0));return g.EventSource.prototype.clone.call(this,a,b)},_clone:function(a,b){var c;g.EventSource.prototype._clone.call(this,a,b);this._show_animation&&(c=b[this._show_animation._id],a._show_animation=c?c:this._show_animation.clone(),a.__show_clb=this.__show_clb);this._hide_animation&&(c=b[this._hide_animation._id],a._hide_animation=c?c:this._hide_animation.clone(),a.__hide_clb=this.__hide_clb);a.__parent=void 0},_getGUInode:function(a){var b=this.__getGUInode(a),c;if(b)return b;
if(b=a.template?a.template:this.template)return a=new Y(b),b=a._compile(),a._addPropertiesToObject(this),b;if(this.html_template){if(DOMParser){try{c=(new DOMParser).parseFromString(this.html_template,"text/html")}catch(e){try{c=(new DOMParser).parseFromString(this.html_template,"application/xhtml+xml")}catch(x){}}if(c&&(b=c.documentElement,b instanceof HTMLElement&&(b=document.importNode(b,!0))))return b}b=document.createElement("div");b.innerHTML=this.html_template;if(b=b.firstElementChild)return b.parentElement.removeChild(b),
b}b=f.isFunction(this.constructor)?this.constructor.name:f.isString(this.constructor)?this.constructor:h;console.warn("Impossible to instance view of component '"+b+", id ["+a.id+"]. A default one is created");return b=document.createElement("div")},__getGUInode:function(a){if(a.node)return a.node;var b=null,c,e,f;if(a.node_id&&(b=document.getElementById(a.node_id)))return b;if(c=a.node_ref)if((f=h._ref_template_reg.exec(c))&&3==f.length?(e=f[1],c=f[2]):e=a.root_ref,c&&e&&((e=(e=g.Object._obs[e])&&
e.view?e.view:document.getElementById(this.id))&&(b=Z(e,c)),b))return b;if(a.template_ref&&(b=this._getTemplateNode(a.template_ref))||a.id&&(b=document.getElementById(a.id)))return b},_getTemplateNode:function(a){if(a=document.querySelector(".application_templates ."+a))return document.importNode(a,!0)},initComponent:function(){g.EventSource.prototype.initComponent.call(this);this._pos=[-1,-1];this._size=[-1,-1];this._transform_origin=[50,50];this._autosizing=[4,4];this._holes={};this._children={};
this._pointerevent_handlers=[];this.__config__||(this.__config__={});this.__config__.id=this.id;(this.view=this._getGUInode(this.__config__))?(this.view.id=this._id,this.view._comp_=this,this.view.setAttribute("x-hag-comp",this.id),this._parse_view(this.view)):console.error("vs.ui.View constructor failed. No view!")},viewDidAdd:function(){var a=this.view,b=this;a&&a.parentElement&&setTimeout(function(){b._size[0]=a.offsetWidth;b._size[1]=a.offsetHeight;b._pos[0]=a.offsetLeft;b._pos[1]=a.offsetTop},
0)},notify:function(){},_parse_view:function(a){if(a&&3!==a.nodeType){var b;if(null!==a.attributes&&(b=a.attributes.getNamedItem("x-hag-hole"))){this._holes[b.nodeValue]=a;return}for(a=a.firstElementChild;a;)this._parse_view(a),a=a.nextElementSibling}},createAndAddComponent:function(a,b,c){b||(b={});b.id||(b.id=g.createId());var e=this.__getGUInode(b),f,d,F;e||(e=this._getTemplateNode(a));e||window[a]&&window[a].prototype&&window[a].prototype.node_template&&(e=document.importNode(window[a].prototype.node_template,
!0));if(!e){f=a+".xhtml";d=h.__comp_templates[f];if(!d)if(d=new XMLHttpRequest,d.open("GET",f,!1),d.send(null),4===d.readyState)if(200===d.status||0===d.status)d=d.responseText,h.__comp_templates[f]=d;else{console.error("Template file for component '"+a+"' unfound.");return}else{console.error("Pb when load the component '"+a+"' template.");return}f=document.createElement("div");f.innerHTML=d;f=f.childNodes;d=0;for(F=f.length;d<F&&!e;)1===f.item(d).nodeType&&(e=f.item(d)),d++}b.node=e;e=null;try{e=
new window[a](b)}catch(ka){a="Impossible to instanciate comp: "+a+(" => "+ka.message);console.error(a);return}try{e.init(),e.configure(b)}catch(E){E.line&&E.sourceURL?(a="Error when initiate comp: "+a+(" => "+E.message),a+="\n"+E.sourceURL+":"+E.line):a=E,console.error(a)}this.add(e,c);return e},isChild:function(a){if(!a)return!1;var b,c;for(b in this._children)if((c=this._children[b])&&(c===a||c instanceof Array&&-1!==c.indexOf(a)))return!0;return!1},add:function(a,b,c){if(a&&(c?a.__gui_object__hack_view__=
c:c=a.view,!this.isChild(a))){var e,d,b=c?b?b:h.ANY_PLACE:h.NON_G_OBJECT;(e=this._children[b])&&f.isArray(e)?e.push(a):e?(d=[],d.push(e),d.push(a),this._children[b]=d):this._children[b]=a;b=this._holes[b];if(c&&b){if(c.parentElement){if(c.parentElement===b){a.__parent=this;a.viewDidAdd&&a.viewDidAdd();return}c.parentElement.removeChild(c)}b.appendChild(c);a.__parent=this;a.viewDidAdd&&a.viewDidAdd()}}},remove:function(a){if(a){var b,c,e;if(e=a.__gui_object__hack_view__?a.__gui_object__hack_view__:
a.view)for(b in this._children)if((c=this._children[b])&&(c===a||c instanceof Array&&-1!==c.indexOf(a))){c instanceof Array?c.remove(a):delete this._children[b];(b=this._holes[b])&&b.removeChild(e);a.__parent=null;break}}},removeAllChildren:function(a){function b(a){var b,c;if(b=e._children[a]){if(b instanceof Array)for(;b.length;)c=b[0],e.remove(c),f.free(c);else e.remove(b),f.free(b);delete e._children[a]}}var c,e=this;if(a)b(a);else{for(c in e._children)b(c);this._children={}}},findNodeRef:function(a){return!this.view?
void 0:Z(this.view,a)},bind:function(a,b,c,e){if("POINTER_START"===a||"POINTER_END"===a||"POINTER_MOVE"===a||a===g.POINTER_START||a===g.POINTER_END||a===g.POINTER_MOVE){if(!this.view)return;var d,y=this,F;c||(c="notify");if(f.isFunction(c))d=c;else if(f.isString(c)&&f.isFunction(b[c]))d=b[c];else{console.error("Invalid bind arguments.");return}if(!d){console.warn("Invalid bind arguments. Unknown func: "+c);return}y=this;F=function(a){if(!g.EVENT_SUPPORT_TOUCH||!(a.changedTouches&&1<a.changedTouches.length)){a.src=
y;if(g.EVENT_SUPPORT_TOUCH&&a.changedTouches){a.pageX=a.changedTouches[0].pageX;a.pageY=a.changedTouches[0].pageY;var c=f.getElementAbsolutePosition(y.view);a.offsetX=a.changedTouches[0].pageX-c.x;a.offsetY=a.changedTouches[0].pageY-c.y}h._propagate_pointer_event(b,d,a)}};"POINTER_START"===a&&(a=g.POINTER_START);"POINTER_MOVE"===a&&(a=g.POINTER_MOVE);"POINTER_END"===a&&(a=g.POINTER_END);this._pointerevent_handlers[b.id+a]=F;this.view.addEventListener(a,F)}g.EventSource.prototype.bind.call(this,a,
b,c,e)},unbind:function(a,b){if(a&&b){if(a===g.POINTER_START||a===g.POINTER_END||a===g.POINTER_MOVE){var c=this._pointerevent_handlers[b.id+a];if(!c||!this.view)return;this.view.removeEventListener(g.POINTER_END,c)}g.EventSource.prototype.unbind.call(this,a,b)}},_updateSizeAndPos:function(){this._updateSize();this._updatePos()},_updateSize:function(){var a=this._pos,b=this._size,c,e,f,d=this._autosizing[0],g=this._autosizing[1],h="auto",E="auto",j=this.view;if(j){if(c=j.parentElement)e=c.offsetWidth,
f=c.offsetHeight;c=4===d||1===d?b[0]+"px":5===d||7===d?"auto":2===d||3===d||6===d||0===d?e?Math.round(100*(b[0]/e))+"%":b[0]+"px":"100%";if(1===d||3===d||5===d||7===d)E=e-(a[0]+b[0])+"px";e=4===g||1===g?b[1]+"px":5===g||7===g?"auto":2===g||3===g||6===g||0===g?f?Math.round(100*(b[1]/f))+"%":b[1]+"px":"100%";if(1===g||3===g||5===g||7===g)h=f-(a[1]+b[1])+"px";a=j.style;a.width=c;a.height=e;a.right=E;a.bottom=h}},_updatePos:function(){var a=this._pos,b=this._size,c=0,e=0,f="auto",d="auto",g="auto",h=
"auto",j=this._autosizing[0],k=this._autosizing[1],m=this.view,n;if(m){if(n=m.parentElement)c=n.offsetWidth,e=n.offsetHeight;if(4===j||5===j||6===j||7===j||2===j&&!c)f=a[0]+"px";else if((2===j||0===j)&&c)f=Math.round(100*(a[0]/c))+"%";if(1===j||3===j||5===j||7===j)g=c-(a[0]+b[0])+"px";if(4===k||5===k||6===k||7===k||2===k&&!e)d=a[1]+"px";else if((2===k||0===k)&&e)d=Math.round(100*(a[1]/e))+"%";if(1===k||3===k||5===k||7===k)h=e-(a[1]+b[1])+"px";a=m.style;a.left=f;a.top=d;a.right=g;a.bottom=h}},getBorder:function(a){return!this.view?
0:(a=this.getComputedStyle("border-"+a+"-width"))?parseInt(a,10):0},getPadding:function(a){if(!this.view)return 0;a=this.getComputedStyle("padding-"+a);return!a?0:parseInt(a,10)},getMargin:function(a){if(!this.view)return 0;a=this.getComputedStyle("margin-"+a);return!a?0:parseInt(a,10)},getStyle:function(a){if(this.view){var b=this.view.style,c;b&&(c=b[a]);return"opacity"===a?c?parseFloat(c):1:"auto"===c?null:c}},getComputedStyle:function(a){var b=this._getComputedStyle(this.view);return value=b?
b[a]:null},_getComputedStyle:function(a){a||(a=this.view);if(a){var b=a.ownerDocument;if(!b||!b.defaultView)b=document;return!b||!b.defaultView?void 0:b.defaultView.getComputedStyle(a,null)}},setStyle:function(a,b){a&&this.view&&this.view.style&&this.view.style.removeProperty&&this.view.style.setProperty&&("undefined"===typeof b?this.view.style.removeProperty(a):(f.isNumber(b)&&(b=""+b),this.view.style.setProperty(a,b,null)))},setStyles:function(a){a&&this.view&&this.view.style&&f.setElementStyle(this.view,
a)},addCssRules:function(a,b){if(b)for(var c=b.length;c--;)this.addCssRule(a,b[c])},addCssRule:function(a,b){if(document.styleSheets){var c,e;document.styleSheets.length||(c=document.getElementsByTagName("head")[0],c.appendChild(bc.createEl("style")));c=document.styleSheets[document.styleSheets.length-1];e=0;c.cssRules?e=c.cssRules.length:c.rules&&(e=c.rules.length);c.insertRule?c.insertRule(a+" {"+b+"}",e):c.addRule&&c.addRule(a,b,e)}},redraw:function(a){if(this.view){var b=this.view,c=b.style.display,
e=this;b.style.display="none";setTimeout(function(){c?b.style.display=c:b.style.removeProperty("display");a&&a instanceof Function&&setTimeout(function(){a.call(e)},0)},0)}},show:function(){this.view&&!this._visible&&(this.__view_display?this.view.style.display=this.__view_display:this.view.style.removeProperty("display"),this.__view_display=void 0,this._show_animation?this._show_animation.process(this,this._show_object,this):this._show_object())},_show_object:function(){if(this.view){this._visible=
!0;var a=this;this.propertyChange();this.__show_clb&&(this._show_animation?this.__show_clb.call(this):setTimeout(function(){a.__show_clb.call(a)},0))}},setShowAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._show_animation=null;else{if(a.constructor===fx.Animation)this._show_animation=a.clone();else if(f.isArray(a))this._show_animation=new fx.Animation,this._show_animation.setAnimations(a);else{console.warn("vs.ui.View.setShowAnimation invalid parameters!");return}b&&(b.duration&&
(this._show_animation.duration=b.duration),b.timing&&(this._show_animation.timing=b.timing),b.origin&&(this._show_animation.origin=b.origin),b.iterationCount&&(this._show_animation.iterationCount=b.iterationCount),b.delay&&(this._show_animation.delay=b.delay))}f.isFunction(c);this.__show_clb=c},hide:function(){this.view&&this._visible&&(this._hide_animation?this._hide_animation.process(this,this._hide_object,this):this._hide_object())},_hide_object:function(){this.view&&(this._visible=!1,this.view.style.display?
(this.__view_display=this.view.style.display,"none"===this.__view_display&&(this.__view_display=void 0)):this.__view_display=void 0,this.view.style.display="none",this.__hide_clb&&this.__hide_clb.call(this),this.propertyChange())},setHideAnimation:function(a,b,c){if("undefined"===typeof a||null===a)this._hide_animation=null;else{if(a.constructor===fx.Animation)this._hide_animation=a.clone();else if(f.isArray(a))this._hide_animation=new fx.Animation,this._hide_animation.setAnimations(a);else{console.warn("vs.ui.View.setHideAnimation invalid parameters!");
return}b&&(b.duration&&(this._hide_animation.duration=b.duration),b.timing&&(this._hide_animation.timing=b.timing),b.origin&&(this._hide_animation.origin=b.origin),b.iterationCount&&(this._hide_animation.iterationCount=b.iterationCount),b.delay&&(this._hide_animation.delay=b.delay))}f.isFunction(c);this.__hide_clb=c},setVisible:function(a){this.view&&f.setElementVisibility(this.view,a)},hasClassName:function(a){return!this.view?!1:f.hasClassName(this.view,a)},addClassName:function(){if(this.view){var a=
Array.prototype.slice.call(arguments);a.unshift(this.view);f.addClassName.apply(this.view,a)}},removeClassName:function(a){if(this.view){var b=Array.prototype.slice.call(arguments);b.unshift(this.view);f.removeClassName.apply(this.view,b)}},handleEvent:function(a){this._propagateToParent(a)},_propagateToParent:function(a){this._bubbling&&this.__parent&&this.__parent.handleEvent&&this.__parent.handleEvent(a)},notifyToParent:function(a){this.__parent&&(this.__parent.handleEvent?this.__parent.handleEvent(a):
this.__parent.notify&&this.__parent.notify(a))},animate:function(a,b,c){var e;if(a instanceof fx.Animation)e=a;else if(f.isArray(a))e=new fx.Animation,e.setAnimations(a);else{console.warn("vs.ui.View.animate invalid parameters!");return}b&&(b.duration&&(e.duration=b.duration),b.timing&&(e.timing=b.timing),b.origin&&(e.origin=b.origin),b.iterationCount&&(e.iterationCount=b.iterationCount),b.delay&&(e.delay=b.delay));return e.process(this,c,this)},translate:function(a,b){this.__view_t_x===a&&this.__view_t_y===
b||(this.__view_t_x=a,this.__view_t_y=b,this.applyTransformation2D())},rotate:function(a){this._rotation!==a&&(this._rotation=a,this.applyTransformation2D())},scale:function(a){a>this._max_scale&&(a=this._max_scale);a<this._min_scale&&(a=this._min_scale);this._scaling!==a&&(this._scaling=a,this.applyTransformation2D())},applyTransformation2D:function(){var a="",a=s?a+("translate3d("+this.__view_t_x+"px,"+this.__view_t_y+"px,0)"):a+("translate("+this.__view_t_x+"px,"+this.__view_t_y+"px)");this._rotation&&
(a+=" rotate("+this._rotation+"deg)");1!==this._scaling&&(a+=" scale("+this._scaling+")");m(this.view,a)}};f.extendClass(h,g.EventSource);f.defineClassProperties(h,{size:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&this._updateSize())},get:function(){var a=this.view;a&&a.parentElement&&(this._size[0]=a.offsetWidth,this._size[1]=a.offsetHeight);return this._size.slice()}},position:{set:function(a){a&&f.isArray(a)&&
2==a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._pos[0]=a[0],this._pos[1]=a[1],this.view&&this._updatePos())},get:function(){var a=this.view;a&&a.parentElement&&(this._pos[0]=a.offsetLeft,this._pos[1]=a.offsetTop);return this._pos.slice()}},autosizing:{set:function(a){a&&f.isArray(a)&&2==a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._autosizing[0]=a[0],this._autosizing[1]=a[1],this.view&&this._updateSizeAndPos())}},visible:{set:function(a){a?this.show():this.hide()},get:function(){return this._visible}},
bubbling:{set:function(a){this._bubbling=a?!0:!1}},enable:{set:function(a){a?(this._enable=!0,this.removeClassName("disabled")):(this._enable=!1,this.addClassName("disabled"))},get:function(){return this._enable}},translation:{set:function(a){f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&this.translate(a[0],a[1])},get:function(){return[this.__view_t_x,this.__view_t_y]}},rotation:{set:function(a){f.isNumber(a)&&this.rotate(a)},get:function(){return this._rotation}},scaling:{set:function(a){f.isNumber(a)&&
this.scale(a)},get:function(){return this._scaling}},minScale:{set:function(a){f.isNumber(a)&&(this._min_scale=a)},get:function(){return this._min_scale}},maxScale:{set:function(a){f.isNumber(a)&&(this._max_scale=a)},get:function(){return this._max_scale}},transformOrigin:{set:function(a){f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._transform_origin[0]=a[0],this._transform_origin[1]=a[1],a=this._transform_origin[0]+"% ",a+=this._transform_origin[1]+"%",this.view.style["-webkit-transform-origin"]=
a)},get:function(){return this._transform_origin.slice()}},showAnimmation:{set:function(a){this.setShowAnimation(a)}},hideAnimation:{set:function(a){this.setHideAnimation(a)}},layout:{set:function(a){a!==h.HORIZONTAL_LAYOUT&&a!==h.DEFAULT_LAYOUT&&a!==h.ABSOLUTE_LAYOUT&&a!==h.VERTICAL_LAYOUT&&a!==h.FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):(this._layout&&this.removeClassName(this._layout),(this._layout=a)&&this.addClassName(this._layout))}}});h._ref_template_reg=/(\w+)#(\w+)/;h.createTemplate=
function(a){var b=document.createElement("div");try{b.innerHTML=a}catch(c){console.error("vs.ui.View.createTemplate failed: "+c)}};p.View=h;aa.prototype={init:function(a,b){this.maxSize="horizontal"===this.dir?this.wrapper.clientWidth:this.wrapper.clientHeight;this.size=Math.round(this.maxSize*this.maxSize/b);this.maxScroll=this.maxSize-this.size;this.toWrapperProp=this.maxScroll/(a-b);this.bar.style["horizontal"===this.dir?"width":"height"]=this.size+"px"},setPosition:function(a){a*=this.toWrapperProp;
0>a?(a=this.shrink?a+3*a:0,5>this.size+a&&(a=-this.size+5)):a>this.maxScroll&&(a=this.shrink?a+3*(a-this.maxScroll):this.maxScroll,5>this.size+this.maxScroll-a&&(a=this.size+this.maxScroll-5));a=s?"horizontal"===this.dir?"translate3d("+Math.round(a)+"px,0,0)":"translate3d(0,"+Math.round(a)+"px,0)":"horizontal"===this.dir?"translate("+Math.round(a)+"px,0)":"translate(0,"+Math.round(a)+"px)";m(this.bar,a)},show:function(){this.wrapper.style.webkitTransitionDelay="0";this.wrapper.style.opacity="1"},
hide:function(){this.wrapper.style.webkitTransitionDelay="200ms";this.wrapper.style.opacity="0"},remove:function(){this.wrapper.parentNode.removeChild(this.wrapper);return null}};var u=function(a){this._layout=void 0;this.parent=h;this.parent(a);this.constructor=u},X={};I.Application_applications=X;u.prototype={_prevent_scroll:!0,initComponent:function(){X[this.id]=this;h.prototype.initComponent.call(this);this.preventScroll=!0;this.html=this.view;this.html._comp_=void 0;if(this.view=this.body=this.html.querySelector("body")){this.view._comp_=
this;this.html.removeAttribute("id");this.html.removeAttribute("x-hag-ref");this.html.removeAttribute("x-hag-comp");this.view.setAttribute("id",this.id);this.view.setAttribute("x-hag-ref",this.id);this.view.setAttribute("x-hag-comp",this.id);var a=this;document.addEventListener("orientationChanged",function(b){(b=window.deviceConfiguration.setOrientation(b.orientation))&&a.propagate("deviceChanged",b,null,!0)})}else console.error("Invalid Application view")},exit:function(){u.exit()},applicationStarted:function(){},
_updateSize:function(){this.view.style.width=this._size[0]+"px";this.view.style.height=this._size[1]+"px";this.view.style.right="auto";this.view.style.bottom="auto"},_updatePos:function(){this.view.style.left=this._pos[0]+"px";this.view.style.top=this._pos[1]+"px";this.view.style.right="auto";this.view.style.bottom="auto"},setActiveStyleSheet:function(a){u.setActiveStyleSheet(a);this.propagate("deviceChanged",a,null,!0)},orientationWillChange:function(){},loadScript:function(a){var b=this;f.importFile(a,
document,function(a){a&&b.propagate("scriptloaded",a)},"js")},loadCSS:function(a){var b=this;f.importFile(a,document,function(a){a&&b.propagate("cssloaded",a)},"css")}};f.extendClass(u,h);f.defineClassProperties(u,{size:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSize(),window.resizeTo(this._size[0],this._size[1])))},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,
this._size[1]=this.view.offsetHeight);return this._size.slice()}},preventScroll:{set:function(a){this._prevent_scroll=a?!0:!1;document.preventScroll=a},get:function(){this._prevent_scroll=document.preventScroll;return this.__prevent_scroll}}});u.exit=function(){window.close&&window.close()};u.configureDevice=function(){window.deviceConfiguration.setDeviceId(Application_default_device);window.deviceConfiguration.setOrientation(window.orientation||0,!0)};u.getOrientation=function(){return window.deviceConfiguration.getOrientation()};
u.start=function(){var a,b;for(a in X)b=X[a],b.redraw(function(){b.propertyChange();b.applicationStarted()})};u.sendStart=function(){console.log("Application.sendStart is deprecated. Please use Application.start");u.start()};u.preloadTemplates=function(a){for(var b=0;b<a.length;b++)f.preloadTemplate(a[b])};var U=function(a){for(var b=0;b<a.length;b++)this.preload(a[b])};window.ImagePreloader=U;U.__image_path={};U.prototype.preload=function(a){U.__image_path[a]||((new Image).src=a,U.__image_path[a]=
!0)};u.prototype.mainViewVisibility=function(){};u.prototype.setImageBackground=function(){};u.prototype.loadingStart=function(){};u.prototype.loadingStop=function(){};p.Application=u;M.prototype={_delegate:null,_split_views:null,_fisrt_view_width:320,_pop_over_border_width:8,_pop_over:null,destructor:function(){h.prototype.destructor.call(this)},initComponent:function(){this._split_views=[];this._pop_over=new r;h.prototype.initComponent.call(this);this._pop_over.init();h.prototype.add.call(this,
this._pop_over);this._pop_over.hide()},add:function(a){var b,c;2===this._split_views.length?console.error("vs.ui.SplitView is limited to two views"):(c=u.getOrientation(),b=this.size,0===this._split_views.length?(a.position=[0,0],a.size=[this._fisrt_view_width,b[1]],90===c||-90===c?(h.prototype.add.call(this,a),this._pop_over.hide(),this._delegate&&this._delegate.willShowView&&this._delegate.willShowView(a,this._pop_over)):(this._pop_over.add(a),this._pop_over.size=[this._fisrt_view_width+2*this._pop_over_border_width,
500],this._delegate&&this._delegate.willHideView&&this._delegate.willHideView(a,this._pop_over))):1===this._split_views.length&&(90===c||-90===c?(a.position=[this._fisrt_view_width,0],a.size=[b[0]-this._fisrt_view_width,b[1]]):(a.position=[0,0],a.size=b),h.prototype.add.call(this,a)),this._split_views.push(a))},remove:function(a){h.prototype.remove.call(this,a)},removeAllChildren:function(){var a,b,c;for(a in this._children)if(b=this._children[a]){if(b instanceof Array)for(;b.length;)c=b[0],this.remove(c),
f.free(c);else this.remove(b),f.free(b);delete this._children[a]}this._children={}},refresh:function(){var a=this.size,b,c;c=u.getOrientation();if((b=this._split_views[0])&&(90===c||-90===c))b.position=[0,0],b.size=[this._fisrt_view_width,a[1]];if(b=this._split_views[1])90===c||-90===c?(b.position=[this._fisrt_view_width,0],b.size=[a[0]-this._fisrt_view_width,a[1]]):(b.position=[0,0],b.size=a);h.prototype.refresh.call(this)},orientationWillChange:function(a){var b=this.size,c;if(c=this._split_views[0])90===
a||-90===a?(this._pop_over.hide(),this._pop_over.isChild(c)&&this._pop_over.remove(c),this.isChild(c)||h.prototype.add.call(this,c),c.position=[0,0],c.size=[this._fisrt_view_width,b[1]],c.show(c.refresh),this._delegate&&this._delegate.willShowView&&this._delegate.willShowView(c,this._pop_over)):(this.isChild(c)&&h.prototype.remove.call(this,c),this._pop_over.isChild(c)||this._pop_over.add(c),c.show(),this._pop_over.size=[this._fisrt_view_width+2*this._pop_over_border_width,500],this._delegate&&this._delegate.willShowView&&
this._delegate.willHideView(c,this._pop_over));if(c=this._split_views[1])90===a||-90===a?(c.position=[this._fisrt_view_width,0],c.size=[b[0]-this._fisrt_view_width,b[1]]):(c.position=[0,0],c.size=b)},orientationDidChange:function(){this.refresh()}};f.extendClass(M,h);f.defineClassProperty(M,"delegate",{set:function(a){this._delegate=a}});p.SplitView=M;var ja={currPageX:0,currPageY:0,pagesX:[],pagesY:[],offsetBottom:0,offsetTop:0,contentReady:!0,_activate_scroll:function(a,b,c){var e=this,d;e.wrapper=
a;e.wrapper.style.overflow="hidden";e.scroller=b;f.isNumber(e.wrapper._ab_view_s)||(e.wrapper._ab_view_s=1);e.options={hScroll:!0,vScroll:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:!1,fadeScrollbar:V||!g.EVENT_SUPPORT_TOUCH,hideScrollbar:!0,scrollbarClass:"",bounce:V,bounceLock:!1,momentum:V,lockDirection:!0,snap:!1,onScrollStart:null,onScrollEnd:null,checkDOMChange:!1};for(d in c)e.options[d]=c[d];e.scroller.style.cssText+="-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;";
e.options.hScrollbar=e.options.hScroll&&e.options.hScrollbar;e.options.vScrollbar=e.options.vScroll&&e.options.vScrollbar;e._scroll_refresh();e._bind(ga,window);e._bind(g.POINTER_START);g.EVENT_SUPPORT_TOUCH||e._bind("mousewheel");e.options.checkDOMChange&&(e.DOMChangeInterval=setInterval(function(){e._check_scroll_size()},250))},_scrollbar_init:function(a){var b=document,c=this[a+"ScrollbarWrapper"];this[a+"Scrollbar"]?(c||(c=b.createElement("div"),this.options.scrollbarClass?c.className=this.options.scrollbarClass+
a.toUpperCase():c.style.cssText="position:absolute;z-index:100;"+("h"===a?"height:7px;bottom:1px;left:2px;right:7px":"width:7px;bottom:7px;top:2px;right:1px"),c.style.cssText+="pointer-events:none;-webkit-transition-property:opacity;-webkit-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(c),this[a+"ScrollbarWrapper"]=c,c=b.createElement("div"),this.options.scrollbarClass||(c.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-webkit-background-clip:padding-box;-webkit-box-sizing:border-box;"+
("h"===a?"height:100%;-webkit-border-radius:4px 3px;":"width:100%;-webkit-border-radius:3px 4px;")),c.style.cssText+="pointer-events:none;-webkit-transition-property:-webkit-transform;-webkit-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-webkit-transition-duration:0;-webkit-transform:"+ha+"0,0"+ia,this[a+"ScrollbarWrapper"].appendChild(c),this[a+"ScrollbarIndicator"]=c),"h"===a?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=q.max(q.round(this.hScrollbarSize*
this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=Math.abs(this.hScrollbarMaxScroll/this.maxScrollX)):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=q.max(q.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=
this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=Math.abs(this.vScrollbarMaxScroll/this.maxScrollY)),this._scroll_indicator_pos(a,!0)):c&&(m(this[a+"ScrollbarIndicator"],""),c.parentNode.removeChild(c),delete this[a+"ScrollbarWrapper"],this[a+"ScrollbarIndicator"]=null)},_check_scroll_size:function(){var a,b;!this.moved&&this.contentReady&&(a=q.round(this.scroller.offsetWidth*this._ab_view_s),b=q.round((this.scroller.offsetHeight-this.offsetBottom-this.offsetTop)*this._ab_view_s),
a===this.scrollerW&&b===this.scrollerH||this._scroll_refresh())},_scroll_pos:function(a,b){this._ab_view_t_x=this.hScroll?a:0;this._ab_view_t_y=this.vScroll?b:0;this._applyInsideTransformation2D();this._scroll_indicator_pos("h");this._scroll_indicator_pos("v")},_scroll_indicator_pos:function(a,b){var c,e,d;this[a+"Scrollbar"]&&(e=this[a+"ScrollbarWrapper"],c=f.getBoundingClientRect(this.scroller),d=f.getBoundingClientRect(this.wrapper),c="h"===a?d.left-c.left:d.top-c.top,c*=this[a+"ScrollbarProp"],
0>c?(c=this.options.fixedScrollbar?0:c+3*c,9>this[a+"ScrollbarIndicatorSize"]+c&&(c=-this[a+"ScrollbarIndicatorSize"]+8)):c>this[a+"ScrollbarMaxScroll"]&&(c=this.options.fixedScrollbar?this[a+"ScrollbarMaxScroll"]:c+3*(c-this[a+"ScrollbarMaxScroll"]),9>this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-c&&(c=this[a+"ScrollbarIndicatorSize"]+this[a+"ScrollbarMaxScroll"]-8)),e.style.webkitTransitionDelay="0",e.style.opacity=b&&this.options.hideScrollbar?"0":"1",m(this[a+"ScrollbarIndicator"],
ha+("h"===a?c+"px,0":"0,"+c+"px")+ia))},_scroll_transition_time:function(a){a+="ms";this.hScrollbar&&(this.hScrollbarIndicator.style.webkitTransitionDuration=a);this.vScrollbar&&(this.vScrollbarIndicator.style.webkitTransitionDuration=a)},_scroll_pointer_start:function(a,b){if(!(g.EVENT_SUPPORT_TOUCH&&1<a.changedTouches.length)){var c=g.EVENT_SUPPORT_TOUCH?a.changedTouches[0]:a,e;this.moved=!1;b||(a.preventDefault(),a.stopPropagation());this.moved=!1;this.animationDuration=this.returnTime=this.dirY=
this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;if(this.options.momentum&&(this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null),s&&(e=new WebKitCSSMatrix(da(this.scroller)),e.m41!==this._ab_view_t_x||e.m42!==this._ab_view_t_y)))this._unbind("webkitTransitionEnd"),this._scroll_pos(e.m41,e.m42);this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)";this.hScrollbar&&(this.hScrollbarIndicator.style.webkitTransitionTimingFunction=
"cubic-bezier(0.33,0.66,0.66,1)");this.vScrollbar&&(this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.66,0.66,1)");this.startX=this._ab_view_t_x;this.startY=this._ab_view_t_y;this.pointX=c.pageX;this.pointY=c.pageY;this.startTime=a.timeStamp;this.options.onScrollStart&&this.options.onScrollStart.call(this);this._bind(g.POINTER_MOVE,document);this._bind(g.POINTER_END,document);this._bind(g.POINTER_CANCEL,document)}},_scroll_pointer_move:function(a,b){if(!(g.EVENT_SUPPORT_TOUCH&&
1<a.changedTouches.length)){var c=g.EVENT_SUPPORT_TOUCH?a.changedTouches[0]:a,e=c.pageX-this.pointX,d=c.pageY-this.pointY,h,F,j;b||(a.preventDefault(),a.stopPropagation());this.pointX=c.pageX;this.pointY=c.pageY;F=f.getBoundingClientRect(this.scroller);j=f.getBoundingClientRect(this.wrapper);c=F.left+e;h=F.top+d;c>j.left||F.right+e<j.right?(c=this.options.bounce?this._ab_view_t_x+e/2.4:0<=c||0<=this.maxScrollX?0:this.maxScrollX,c=this.options.bounce?this._ab_view_t_x+e/2.4:c>=j.left||0<=this.maxScrollX?
this._ab_view_t_x:this._ab_view_t_x):c=this._ab_view_t_x+e;h=h>j.top||F.bottom+d<j.bottom?this.options.bounce?this._ab_view_t_y+d/2.4:h>=j.top||0<=this.maxScrollY?this._ab_view_t_y:this._ab_view_t_y:this._ab_view_t_y+d;4>this.absDistX&&4>this.absDistY?(this.distX+=e,this.distY+=d,this.absDistX=q.abs(this.distX),this.absDistY=q.abs(this.distY)):(this.options.lockDirection&&(this.absDistX>this.absDistY+3?(h=this._ab_view_t_y,d=0):this.absDistY>this.absDistX+3&&(c=this._ab_view_t_x,e=0)),this.moved=
!0,this._scroll_pos(c,h),this.dirX=0<e?-1:0>e?1:0,this.dirY=0<d?-1:0>d?1:0,300<a.timeStamp-this.startTime&&(this.startTime=a.timeStamp,this.startX=this._ab_view_t_x,this.startY=this._ab_view_t_y))}},_scroll_pointer_end:function(a,b){if(!(g.EVENT_SUPPORT_TOUCH&&0!==a.touches.length)){b||(a.preventDefault(),a.stopPropagation());var c={dist:0,time:0},e={dist:0,time:0},d=a.timeStamp-this.startTime,h=this._ab_view_t_x,j=this._ab_view_t_y,k;this._unbind(g.POINTER_MOVE,document);this._unbind(g.POINTER_END,
document);this._unbind(g.POINTER_CANCEL,document);300>d&&this.options.momentum&&(e=f.getBoundingClientRect(this.scroller),k=f.getBoundingClientRect(this.wrapper),c=this._scroll_momentum_x(h-this.startX,d,e,k),e=this._scroll_momentum_y(j-this.startY,d,e,k),h=this._ab_view_t_x+c.dist,j=this._ab_view_t_y+e.dist);c.dist||e.dist?(c=q.max(q.max(c.time,e.time),10),this.options.snap&&(d=this._scroll_snap(h,j),h=d.x,j=d.y,c=q.max(d.time,c)),this.scrollTo(h,j,c)):this.options.snap?(d=this._scroll_snap(this._ab_view_t_x,
this._ab_view_t_y),(d.x!==this._ab_view_t_x||d.y!==this._ab_view_t_y)&&this.scrollTo(d.x,d.y,d.time)):this._scroll_reset_pos()}},_scroll_reset_pos:function(a){var b=this._ab_view_t_x,c=this._ab_view_t_y,e,d;e=f.getBoundingClientRect(this.scroller);d=f.getBoundingClientRect(this.wrapper);e.width<d.width?b=this._ab_view_t_x:e.left>d.left?b=this._ab_view_t_x+(d.left-e.left):e.right<d.right&&(b=this._ab_view_t_x+(d.right-e.right));e.height<d.height?c=this._ab_view_t_y:e.top>d.top?c=this._ab_view_t_y+
(d.top-e.top):e.bottom<d.bottom&&(c=this._ab_view_t_y+(d.bottom-e.bottom));b===this._ab_view_t_x&&c===this._ab_view_t_y?(this.moved&&(this.options.onScrollEnd&&this.options.onScrollEnd.call(this),this.moved=!1),this.hScrollbar&&this.options.hideScrollbar&&(this.hScrollbarWrapper.style.webkitTransitionDelay="300ms",this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&(this.vScrollbarWrapper.style.webkitTransitionDelay="300ms",this.vScrollbarWrapper.style.opacity="0")):
(void 0===a&&(a=200),a&&(this.scroller.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)",this.hScrollbar&&(this.hScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)"),this.vScrollbar&&(this.vScrollbarIndicator.style.webkitTransitionTimingFunction="cubic-bezier(0.33,0.0,0.33,1)")),this.scrollTo(b,c,a))},_scroll_timed:function(a,b,c){var e=this,d=e._ab_view_t_x,f=e._ab_view_t_y,g=(new Date).getTime(),h;e.animationDuration=0;e.scrollInterval&&(clearInterval(e.scrollInterval),
e.scrollInterval=null);e.scrollInterval=setInterval(function(){var j=(new Date).getTime();j>=g+c?(clearInterval(e.scrollInterval),e.scrollInterval=null,e._scroll_pos(a,b),e._scroll_transition_end()):(j=(j-g)/c-1,h=q.sqrt(1-j*j),j=(a-d)*h+d,e._scroll_pos(j,(b-f)*h+f))},20)},_scroll_transition_end:function(a){a&&a.stopPropagation();this._unbind("webkitTransitionEnd");this._scroll_reset_pos(this.returnTime);this.returnTime=0},_scroll_wheel:function(a){var b=this._ab_view_t_x+a.wheelDeltaX/12,a=this._ab_view_t_y+
a.wheelDeltaY/12;0<b?b=0:b<this.maxScrollX&&(b=this.maxScrollX);0<a?a=0:a<this.maxScrollY&&(a=this.maxScrollY);this.scrollTo(b,a,0)},_scroll_momentum_x:function(a,b,c,e){var b=q.abs(a)/b,d=b*b/0.0012,f=0;0<a&&c.left-d<e.left?(f=c.width/(30/(6.0E-4*(d/b))),maxDistUpper=e.left-c.left+f,this.returnTime=800/c.width*f+100,b=b*maxDistUpper/d,d=maxDistUpper):0>a&&c.right+d>e.right&&(f=c.width/(30/(6.0E-4*(d/b))),maxDistLower=c.right-e.right+f,this.returnTime=800/c.width*f+100,b=b*maxDistLower/d,d=-maxDistLower);
return{dist:d,time:q.round(b/6.0E-4)}},_scroll_momentum_y:function(a,b,c,e){var b=q.abs(a)/b,d=b*b/0.0012,f=0;0<a&&c.top-d<e.top?(f=c.height/(30/(6.0E-4*(d/b))),maxDistUpper=e.top-c.top+f,this.returnTime=800/c.height*f+100,b=b*maxDistUpper/d,d=maxDistUpper):0>a&&c.bottom+d>e.bottom&&(f=c.height/(30/(6.0E-4*(d/b))),maxDistLower=c.bottom-e.bottom+f,this.returnTime=800/c.height*f+100,b=b*maxDistLower/d,d=-maxDistLower);return{dist:d,time:q.round(b/6.0E-4)}},_scroll_offset:function(a,b){var c=-a.offsetLeft,
e=-a.offsetTop;if(!b)return{x:c,y:e};for(;a=a.offsetParent;)c-=a.offsetLeft,e-=a.offsetTop;return{x:c,y:e}},_scroll_snap:function(a,b){var c,e,d;d=this.pagesX.length-1;for(c=0,e=this.pagesX.length;c<e;c++)if(a>=this.pagesX[c]){d=c;break}d===this.currPageX&&0<d&&0>this.dirX&&d--;a=this.pagesX[d];e=(e=q.abs(a-this.pagesX[this.currPageX]))?500*(q.abs(this._ab_view_t_x-a)/e):0;this.currPageX=d;d=this.pagesY.length-1;for(c=0;c<d;c++)if(b>=this.pagesY[c]){d=c;break}d===this.currPageY&&0<d&&0>this.dirY&&
d--;b=this.pagesY[d];c=(c=q.abs(b-this.pagesY[this.currPageY]))?500*(q.abs(this._ab_view_t_y-b)/c):0;this.currPageY=d;d=q.round(q.max(e,c))||200;return{x:a,y:b,time:d}},_bind:function(a,b){(b||this.scroller).addEventListener(a,this,!1)},_unbind:function(a,b){(b||this.scroller).removeEventListener(a,this,!1)},_deactivate_scroll:function(){this.options.checkDOMChange&&clearTimeout(this.DOMChangeInterval);this.vScrollbar=this.hScrollbar=!1;this._scrollbar_init("h");this._scrollbar_init("v");m(this.scroller,
"");this._unbind("webkitTransitionEnd");this._unbind(ga,window);this._unbind(g.POINTER_START);this._unbind(g.POINTER_MOVE,document);this._unbind(g.POINTER_END,document);this._unbind(g.POINTER_CANCEL,document)},_scroll_refresh:function(a){var b=0,c=0,e,d,g;e=f.getBoundingClientRect(this.scroller);d=f.getBoundingClientRect(this.wrapper);this.wrapperW=d.width;this.wrapperH=d.height;this.scrollerW=e.width;this.scrollerH=e.height;this.maxScrollX=d.width-e.width;this.maxScrollY=d.height-e.height;this.animationDuration=
this.dirY=this.dirX=0;this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;this._scrollbar_init("h");this._scrollbar_init("v");if(f.isString(this.options.snap)){this.pagesX=[];this.pagesY=[];d=this.scroller.querySelectorAll(this.options.snap);for(c=0,e=d.length;c<
e;c++)b=this._scroll_offset(d[c]),this.pagesX[c]=b.x<this.maxScrollX?this.maxScrollX:b.x*this._ab_view_s,this.pagesY[c]=b.y<this.maxScrollY?this.maxScrollY:b.y*this._ab_view_s}else if(this.options.snap){for(this.pagesX=[];b>=this.maxScrollX;)this.pagesX[c]=b,b-=this.wrapperW,c++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);c=b=0;for(this.pagesY=[];b>=this.maxScrollY;)this.pagesY[c]=b,b-=this.wrapperH,
c++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}a&&(a=this._scroll_offset(this.wrapper,!0),this.wrapperOffsetLeft=-a.x,this.wrapperOffsetTop=-a.y);g&&0===this._ab_view_t_y&&(g=g-this.scrollerH+this._ab_view_t_y,this.scrollTo(0,g,0));this._scroll_reset_pos()},scrollTo:function(a,b,c,e){var d=this;e&&(a=d._ab_view_t_x-a,b=d._ab_view_t_y-b);c=!c||q.round(d._ab_view_t_x)===q.round(a)&&q.round(d._ab_view_t_y)===
q.round(b)?0:c;d.moved=!0;c&&d._bind("webkitTransitionEnd");d.animationDuration=c;d._scroll_pos(a,b);c||setTimeout(function(){d._scroll_transition_end()},0)},scrollToElement:function(a,b){var c;if(a=a.nodeType?a:this.scroller.querySelector(a))c=this._scroll_offset(a),c.x=0<c.x?0:c.x<this.maxScrollX?this.maxScrollX:c.x,c.y=0<c.y?0:c.y<this.maxScrollY?this.maxScrollY:c.y,b=void 0===b?q.max(2*q.abs(c.x),2*q.abs(c.y)):b,this.scrollTo(c.x,c.y,b)},scrollToPage:function(a,b,c){this.options.snap?(a="next"===
a?this.currPageX+1:"prev"===a?this.currPageX-1:a,b="next"===b?this.currPageY+1:"prev"===b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY&&(b=this.maxScrollY));this.scrollTo(a,b,c||400)}},V="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,ga="onorientationchange"in
window?"orientationchange":"resize",ha="translate"+(V?"3d(":"("),ia=V?",0)":")",q=Math;j.NO_SCROLL=0;j.VERTICAL_SCROLL=1;j.HORIZONTAL_SCROLL=2;j.SCROLL=3;j.NO_PINCH=0;j.ROTATION=1;j.SCALE=2;j.ROTATION_AND_SCALE=3;j.prototype={_delegate:null,_scroll:!1,__scroll_activated:!1,_pinch:j.NO_PINCH,_ab_view_t_x:0,_ab_view_t_y:0,_ab_view_s:1,_ab_view_r:0,_animation_duration:0,refresh:function(){var a,b=this.size,c=b[0],b=b[1],e;a=this._getComputedStyle(this.view);var d=0,f=0;if(this._sub_view){h.prototype.refresh.call(this);
a&&(e=a["border-right-width"],d+=e?parseInt(e,10):0,e=a["border-left-width"],d+=e?parseInt(e,10):0,e=a["border-top-width"],f+=e?parseInt(e,10):0,e=a["borde-bottom-width"],f+=e?parseInt(e,10):0);c-=d;b-=f;for(a=this._sub_view.firstElementChild;a;)e=a.offsetHeight+a.offsetTop,e>b&&(b=e),e=a.offsetWidth+a.offsetLeft,e>c&&(c=e),a=a.nextElementSibling;this._scroll===j.SCROLL&&(this._sub_view.style.width=c+"px",this._sub_view.style.height=b+"px");this._scroll===j.HORIZONTAL_SCROLL&&(this._sub_view.style.width=
c+"px",this._sub_view.style.height=this.size[1]-d+"px");this._scroll===j.VERTICAL_SCROLL&&(this._sub_view.style.width=this.size[0]-f+"px",this._sub_view.style.height=b+"px");this._scroll===j.NO_SCROLL&&(b=this.size,this._sub_view.style.width=b[0]+"px",this._sub_view.style.height=b[1]+"px");this.__scroll_activated&&this._scroll_refresh(this._pinch)}},destructor:function(){this._scroll&&this._deactivate_scroll();this._scroll=!1;this._sub_view&&this.view.removeChild(this._sub_view);h.prototype.destructor.call(this);
delete this._sub_view},add:function(a,b){a&&(a.constructor===G&&(b="top_bar"),a.constructor===d&&(b="bottom_bar"),h.prototype.add.call(this,a,b))},initComponent:function(){h.prototype.initComponent.call(this);this._sub_view=this.view.querySelector(".content");this.pinch=this._pinch;this.scroll=this._scroll;this.layout=this._layout;this.animationDuration=this._animation_duration;this.refresh();this._applyInsideTransformation2D()},handleEvent:function(a){switch(a.type){case g.POINTER_START:this.pointerStart(a);
break;case g.POINTER_MOVE:this._scroll_pointer_move(a);break;case g.POINTER_CANCEL:case g.POINTER_END:this._scroll_pointer_end(a);break;case "gesturestart":this.gestureStart(a);break;case "gesturechange":this.gestureChange(a);break;case "gestureend":case "gesturecancel":this.gestureEnd(a);break;case "webkitTransitionEnd":this._scroll_transition_end();break;case "orientationchange":case "resize":this.refresh();break;case "DOMSubtreeModified":this.onDOMModified(a)}return!1},gestureStart:function(a){a.preventDefault();
a.stopPropagation();this.animationDuration=0;this._pinch&j.SCALE&&this._delegate&&this._delegate.viewWillStartZooming&&this._delegate.viewWillStartZooming(this);document.addEventListener("gesturechange",this);document.addEventListener("gestureend",this);document.addEventListener("gesturecancel",this);this.view.addEventListener("gestureend",this);this.view.addEventListener("gesturecancel",this);this.__ab_view_s=this._ab_view_s;this.__ab_view_r=this._ab_view_r;origin_str="50% 50%";this._sub_view.style["-webkit-transform-origin"]=
origin_str},gestureChange:function(a){var b=this.__ab_view_s*a.scale;a.preventDefault();a.stopPropagation();b>this._max_scale&&(b=this._max_scale);b<this._min_scale&&(b=this._min_scale);this._pinch===j.ROTATION?this._ab_view_r=this.__ab_view_r+a.rotation:this._pinch===j.SCALE?this._ab_view_s=b:this._pinch===j.ROTATION_AND_SCALE&&(this._ab_view_r=this.__ab_view_r+a.rotation,this._ab_view_s=b);this._applyInsideTransformation2D()},gestureEnd:function(a){var b=this;a.preventDefault();a.stopPropagation();
document.removeEventListener("gesturechange",this);document.removeEventListener("gestureend",this);document.removeEventListener("gesturecancel",this);this.view.removeEventListener("gestureend",this);this.view.removeEventListener("gesturecancel",this);setTimeout(function(){b.refresh()},0);this._pinch&j.SCALE&&this._delegate&&this._delegate.viewDidEndZooming&&this._delegate.viewDidEndZooming(this,this._ab_view_s)},pointerStart:function(a){var b,c=0,e=0;if(a.changedTouches&&1<a.changedTouches.length){b=
a.changedTouches.length;for(i=0;i<b;i++)c+=a.changedTouches[i].pageX,e+=a.changedTouches[i].pageY;c=c/b-this._pos[0];e=e/b-this._pos[1];this._sub_view.style["-webkit-transform-origin"]=c+"px "+e+"px"}else this._scroll_pointer_start(a)},onDOMModified:function(a){a.target.parentNode===this._sub_view&&(this.refresh(),this.options.topOnDOMChanges&&(0!==this._ab_view_t_x||0!==this._ab_view_t_y)&&this.scrollTo(0,0,0))},onScrollEnd:function(){},insideTranslate:function(a,b,c){this._ab_view_t_x===a&&this._ab_view_t_y===
b||(this._ab_view_t_x=a,this._ab_view_t_y=b,this._applyInsideTransformation2D(c))},insideRotate:function(a,b){this._ab_view_r!==a&&(this._ab_view_r=a,this._applyInsideTransformation2D(b),this._scroll&&this._scroll_refresh(this._pinch))},insideScale:function(a,b){a>this._max_scale&&(a=this._max_scale);a<this._min_scale&&(a=this._min_scale);this._ab_view_s!==a&&(this._ab_view_s=a,this._applyInsideTransformation2D(b))},_applyInsideTransformation2D:function(a){var b="",c,e=this;c=function(b){b.currentTarget===
e._sub_view&&(e._sub_view.removeEventListener("webkitTransitionEnd",c,!1),a&&a.call(e))};b=s?b+("translate3d("+this._ab_view_t_x+"px,"+this._ab_view_t_y+"px,0)"):b+("translate("+this._ab_view_t_x+"px,"+this._ab_view_t_y+"px)");this._ab_view_r&&(b+=" rotate("+this._ab_view_r+"deg)");1!==this._ab_view_s&&(b+=" scale("+this._ab_view_s+")");a&&this._sub_view.addEventListener("webkitTransitionEnd",c,!1);m(this._sub_view,b)},_updateSize:function(){h.prototype._updateSize.call(this);this.refresh()}};f.extendClass(j,
h);f.defineClassProperties(j,{delegate:{set:function(a){this._delegate=a}},scroll:{set:function(a){if(a){if(!0===a||1===a||2===a||3===a){if(!this.__scroll_activated&&this.view&&this._sub_view){var b={bubbling:!1};1===a?(b.hScrollbar=!1,b.vScrollbar=!0):2===a?(b.hScrollbar=!0,b.vScrollbar=!1):(b.hScrollbar=!0,b.vScrollbar=!0);this._activate_scroll(this.view,this._sub_view,b);this.__scroll_activated=!0;this.refresh()}this._scroll=a}}else this.__scroll_activated&&(this._deactivate_scroll(),this.__scroll_activated=
!1),this._scroll=!1},get:function(){return this._scroll}},pinch:{set:function(a){a!==j.NO_PINCH&&a!==j.ROTATION&&a!==j.SCALE&&a!==j.ROTATION_AND_SCALE||(this._pinch=a,this.view&&(a===j.NO_PINCH&&this._pinch!==j.NO_PINCH?this.view.removeEventListener("gesturestart",this):a!==j.NO_PINCH&&this._pinch===j.NO_PINCH&&(this.view.addEventListener("gesturestart",this),this.view.addEventListener("touchstart",this))))}},animationDuration:{set:function(a){a||(a=0);f.isNumber(a)&&(this._animation_duration=a,this._sub_view&&
(this._sub_view.style.webkitTransitionDuration=a+"ms",(this.hScrollbar||this.vScrollbar)&&this._scroll_transition_time(a)))}},layout:{set:function(a){a!==h.HORIZONTAL_LAYOUT&&a!==h.DEFAULT_LAYOUT&&a!==h.ABSOLUTE_LAYOUT&&a!==h.VERTICAL_LAYOUT&&a!==h.FLOW_LAYOUT&&a?console.error("Unsupported layout '"+a+"'!"):this._sub_view?(this._layout&&f.removeClassName(this._sub_view,this._layout),(this._layout=a)&&f.addClassName(this._sub_view,this._layout)):this._layout=a}}});p.ScrollView=j;v.STRETCH_NONE=0;v.STRETCH_FILL=
1;v.STRETCH_UNIFORM=2;v.STRETCH_UNIFORM_FILL=3;v.prototype={_image_data:null,_image_width:0,_image_height:0,_image_loaded:!1,_src:null,_stretch:v.STRETCH_FILL,destructor:function(){this._sub_view&&(this._image_data.onload=null,delete this._image_data,this._image_loaded=!1,this._sub_view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");j.prototype.destructor.call(this)},show:function(){j.prototype.show.call(this);this.stretch=this._stretch},refresh:function(){this.__scroll_activated&&
this._scroll_refresh(this._pinch)},_image_onload:function(){this._image_loaded=!0;this._image_width=this._image_data.width;this._image_height=this._image_data.height;this._sub_view&&(this._sub_view.src=this._src);this.stretch=this._stretch;this.propagate("load");var a=this;setTimeout(function(){a.refresh();a._applyInsideTransformation2D()},0)},initComponent:function(){j.prototype.initComponent.call(this);var a=this;this._image_data=new Image;this._image_data.onload=function(b){a._image_onload(b)};
this.pinch=this._pinch;this.pan=this._pan;this._sub_view&&this._sub_view.src&&(this._src=this._sub_view.getAttribute("src"),this._image_data.src=this._src,this._image_onload());this._sub_view&&(this._sub_view.ondragstart=function(a){a.preventDefault();return!1},this.stretch=this._stretch);this.refresh();this._applyInsideTransformation2D()}};f.extendClass(v,j);f.defineClassProperties(v,{src:{set:function(a){f.isString(a)&&(this._image_loaded=!1,this._src=a,this._image_data.src=this._src)},get:function(){return this._src}},
stretch:{set:function(a){if(f.isNumber(a)&&!(a!==v.STRETCH_FILL&&a!==v.STRETCH_NONE&&a!==v.STRETCH_UNIFORM&&a!==v.STRETCH_UNIFORM_FILL)&&(this._stretch=a,this._sub_view&&this._image_loaded))if(this._stretch===v.STRETCH_FILL)this._sub_view.setAttribute("width","100%"),this._sub_view.setAttribute("height","100%");else if(this._stretch===v.STRETCH_NONE)this._sub_view.removeAttribute("width"),this._sub_view.removeAttribute("height");else if(this._stretch===v.STRETCH_UNIFORM){var a=this._size[0]/this._size[1],
b=this._image_width/this._image_height;a<b?(this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height")):(this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height","100%"))}else this._stretch===v.STRETCH_UNIFORM_FILL&&(a=this._size[0]/this._size[1],b=this._image_width/this._image_height,a>b?(this._sub_view.setAttribute("width","100%"),this._sub_view.removeAttribute("height")):(this._sub_view.removeAttribute("width"),this._sub_view.setAttribute("height",
"100%")))},get:function(){return this._stretch}},size:{set:function(a){if(f.isArray(a)||2===a.length||f.isNumber(a[0])&&f.isNumber(a[1]))this.stretch=this._stretch,this._size[0]=a[0],this._size[1]=a[1],this._updateSize()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});p.ScrollImageView=v;N.prototype={_ab_view_t_x:0,_ab_view_t_y:0,_value:"",destructor:function(){this.view.removeEventListener("change",
this);this.view.removeEventListener("focus",this);this.view.removeEventListener("blur",this);this.view.removeEventListener("textInput",this);h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);f.isString(this._value)&&(this.view.value=this._value,this.view.addEventListener("textInput",this),this.view.addEventListener("change",this),this.view.addEventListener("focus",this),this.view.addEventListener("blur",this))},setFocus:function(){this.view.focus()},
setBlur:function(){this.view.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},handleEvent:function(a){function b(a){a.src!==c.view&&(document.removeEventListener(g.POINTER_START,b,!0),c.setBlur())}var c=this;switch(a.type){case "focus":document.addEventListener(g.POINTER_START,b,!0);break;case "change":this._value=this.view.value;this.propertyChange();this.propagate("change",this._value);break;case "textInput":this._value=this.view.value,this.propertyChange(),
this.propagate("continuous_change",this._value)}}};f.extendClass(N,h);f.defineClassProperty(N,"value",{set:function(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this.view.value=a},get:function(){return this._value}});p.TextArea=N;w.DEFAULT_TYPE="default";w.DEFAULT_STYLE="default_style";w.GREEN_STYLE="green";w.RED_STYLE="red";w.GREY_STYLE="grey";w.NAVIGATION_TYPE="nav";w.NAVIGATION_BACK_TYPE="nav_back";w.NAVIGATION_FORWARD_TYPE=
"nav_forward";w.BLUE_STYLE="blue_style";w.BLACK_STYLE="black_style";w.SILVER_STYLE="silver_style";w.prototype={__touch_binding:!1,__is_touched:!1,_style:w.DEFAULT_STYLE,_type:w.DEFAULT_TYPE,_selected:!1,_text:"",_released_image:"",_selected_image:"",_disabled_image:"",_setPressed:function(a){a?(this.addClassName("pressed"),this._selected=!0):(this.removeClassName("pressed"),this._selected=!1)},destructor:function(){this.__touch_binding&&(this.view.removeEventListener(g.POINTER_START,this),this.__touch_binding=
!1);h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this.text_view=this.view.firstElementChild;this.__touch_binding||(this.view.addEventListener(g.POINTER_START,this),this.__touch_binding=!0);this.text=this._text?this._text:"";this.view.name=this.id;this._style&&this.addClassName(this._style);this._type&&this.addClassName(this._type)},handleEvent:function(a){if(this._enable){var b=this;a.preventDefault();switch(a.type){case g.POINTER_START:if(this.__is_touched)break;
if(g.EVENT_SUPPORT_TOUCH&&1<a.touches.length)break;a.stopPropagation();this.__button_time_out&&(clearTimeout(this.__button_time_out),this.__button_time_out=0);this._setPressed(!0);document.addEventListener(g.POINTER_END,this);document.addEventListener(g.POINTER_MOVE,this);this.__start_x=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageX:a.pageX;this.__start_y=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY;this.__is_touched=!0;return!1;case g.POINTER_MOVE:if(!this.__is_touched)break;var c=(g.EVENT_SUPPORT_TOUCH?
a.touches[0].pageY:a.pageY)-this.__start_y;if(Math.abs((g.EVENT_SUPPORT_TOUCH?a.touches[0].pageX:a.pageX)-this.__start_x)+Math.abs(c)<h.MOVE_THRESHOLD)return a.stopPropagation(),!1;document.removeEventListener(g.POINTER_END,this);document.removeEventListener(g.POINTER_MOVE,this);this.__is_touched=!1;this._setPressed(!1);return!1;case g.POINTER_END:if(!this.__is_touched)break;this.__is_touched=!1;a.stopPropagation();document.removeEventListener(g.POINTER_END,this);document.removeEventListener(g.POINTER_MOVE,
this);this.__button_time_out=setTimeout(function(){b._setPressed(!1);b.__button_time_out=0},h.UNSELECT_DELAY);this.propagate("select");return!1}}}};f.extendClass(w,h);f.defineClassProperties(w,{text:{set:function(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.text_view&&f.setElementInnerText(this.text_view,this._text)},get:function(){return this._text}},style:{set:function(a){f.isString(a)&&(a=a.replace("_ios",
""),this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},get:function(){return this._style}},type:{set:function(a){f.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}}});p.Button=w;D.prototype={_items_selectable:!0,_scroll:0,_model:null,__elem:null,__scroll_start:0,add:function(){},remove:function(){},destructor:function(){h.prototype.destructor.call(this);this._model.unbindChange(null,
this,this._modelChanged);this._model_allocated&&f.free(this._model);this._model_allocated=!1},initComponent:function(){h.prototype.initComponent.call(this);this._model=new I.core.Array;this._model.init();this._model_allocated=!0;this._model.bindChange(null,this,this._modelChanged);this._holes.item_children||(this._holes.item_children=this.view.querySelector("ul"));this._list_items=this._sub_view=this._holes.item_children;s?m(this._list_items,"translate3d(0,0,0)"):m(this._list_items,"translate(0,0)");
this._renderData(this._items_selectable);this.refresh()},_modelChanged:function(){this._renderData(this._items_selectable);this.refresh();this._clearScroll()},_renderData:function(){},_touchItemFeedback:function(){},_untouchItemFeedback:function(){},_updateSelectItem:function(){},handleEvent:function(a){var b=a.currentTarget,c=this;if("click"===a.type)a.stopPropagation(),a.preventDefault();else{if(a.type===g.POINTER_START){if(g.EVENT_SUPPORT_TOUCH&&1<a.touches.length)return;a.stopPropagation();a.preventDefault();
this.__touch_start=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY;this._scroll&&(this.__max_scroll=this.size[1]-this._list_items.offsetHeight,0>this.__max_scroll&&this._scrollbar&&this._scrollbar.init(this.size[1],this._list_items.offsetHeight),this._list_items.style.webkitTransition="");this.__scroll_start_time=a.timeStamp;document.addEventListener(g.POINTER_MOVE,this,!1);document.addEventListener(g.POINTER_END,this,!1);if(!this._items_selectable)return!1;if(b===this.view){this.__elem=null;return}this.__elem=
b;this.__list_time_out&&clearTimeout(this.__list_time_out);this.__elem_to_unselect&&(this._untouchItemFeedback(this.__elem_to_unselect),this.__elem_to_unselect=null);this.__list_time_out=setTimeout(function(){c._touchItemFeedback(b);c.__list_time_out=0},h.SELECT_DELAY);this._startScrolling&&this._startScrolling()}else a.type===g.POINTER_MOVE?(a.stopPropagation(),a.preventDefault(),a=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY,this.__delta=a-this.__touch_start,a=this.__scroll_start+this.__delta,
this._scroll&&(0>this.__max_scroll&&this._scrollbar&&this._scrollbar.show(),s?m(this._list_items,"translate3d(0,"+a+"px,0)"):m(this._list_items,"translate(0,"+a+"px)"),0>this.__max_scroll&&this._scrollbar&&this._scrollbar.setPosition(a)),this.__elem&&Math.abs(this.__delta)>h.MOVE_THRESHOLD&&(this.__list_time_out&&(clearTimeout(this.__list_time_out),this.__list_time_out=0),this._untouchItemFeedback(this.__elem),this.__elem=null),this._isScrolling&&this._isScrolling()):a.type===g.POINTER_END&&(a.stopPropagation(),
a.preventDefault(),document.removeEventListener(g.POINTER_MOVE,this),document.removeEventListener(g.POINTER_END,this),this.__delta&&(this.__scroll_start+=this.__delta),this._scroll&&(this._scrollbar&&this._scrollbar.hide(),0<=this.__max_scroll?(this._list_items.style.webkitTransition="0.2s ease-out",s?m(this._list_items,"translate3d(0,0,0)"):m(this._list_items,"translate(0,0)"),this.__scroll_start=0):0<this.__scroll_start?(this._list_items.style.webkitTransition="0.2s ease-out",s?m(this._list_items,
"translate3d(0,0,0)"):m(this._list_items,"translate(0,0)"),this.__scroll_start=0):this.__scroll_start<this.__max_scroll?(this._list_items.style.webkitTransition="0.2s ease-out",s?m(this._list_items,"translate3d(0,"+this.__max_scroll+"px,0)"):m(this._list_items,"translate(0,"+this.__max_scroll+"px)"),this.__scroll_start=this.__max_scroll):(a=a.timeStamp-this.__scroll_start_time,250>a&&(a=this.__delta?this.__scroll_start+4*this.__delta:this.__scroll_start,0<a?a=0:a<this.__max_scroll&&(a=this.__max_scroll),
this.__scroll_start=a,this._list_items.style.webkitTransition="0.3s ease-out",s?m(this._list_items,"translate3d(0,"+a+"px,0)"):m(this._list_items,"translate(0,"+a+"px)"),this._scrollbar&&this._scrollbar.setPosition(a)))),this.__elem&&(this.__list_time_out&&(clearTimeout(this.__list_time_out),this._touchItemFeedback(this.__elem)),this.__elem_to_unselect=this.__elem,this.__list_time_out=setTimeout(function(){c._untouchItemFeedback(c.__elem_to_unselect);c.__elem_to_unselect=null;c.__list_time_out=0},
h.UNSELECT_DELAY),this._updateSelectItem(this.__elem)),this._endScrolling&&this._endScrolling(),this.__delta=0,this.__elem=null);return!1}},_clearScroll:function(){this.__scroll_start=0;this._list_items&&(s?m(this._list_items,"translate3d(0,0,0)"):m(this._list_items,"translate(0,0)"));this._scrollbar&&this._scrollbar.setPosition(0)},_scrollToElement:function(a,b){if(a){var c=f.getElementAbsolutePosition(a),e=f.getElementAbsolutePosition(this.view);this.__max_scroll=this.size[1]-this._list_items.offsetHeight;
b||(b=0);c=this.__scroll_start+(e.y-c.y)+b;c=0<c?0:c<this.__max_scroll?this.__max_scroll:c;this._list_items.style.webkitTransition="0.3s ease-out";this.__scroll_start=c;s?m(this._list_items,"translate3d(0,"+c+"px,0)"):m(this._list_items,"translate(0,"+c+"px)");this._scrollbar&&this._scrollbar.setPosition(c)}}};f.extendClass(D,h);f.defineClassProperties(D,{scroll:{set:function(a){a?(this._scroll=j.VERTICAL_SCROLL,a=window.deviceConfiguration.os,!this._scrollbar&&a!==o.OS_WP7&&a!==o.OS_WINDOWS&&(this._scrollbar=
new aa("vertical",this.view,!0,!0)),this.view.addEventListener(g.POINTER_START,this,!1)):(this._scroll=0,this._scrollbar&&(this._scrollbar.remove(),delete this._scrollbar),this.view.removeEventListener(g.POINTER_START,this))},get:function(){return this._scroll?!0:!1}},model:{set:function(a){a&&(f.isArray(a)?(this._model.removeAll(),this._model.add.apply(this._model,a)):a.toJSON&&a.propertyChange&&(this._model_allocated&&(this._model.unbindChange(null,this,this._modelChanged),f.free(this._model)),
this._model_allocated=!1,this._model=a,this._model.bindChange(null,this,this._modelChanged)))},get:function(){return this._model}},data:{set:function(a){f.isArray(a)&&(this._model_allocated?this._model.removeAll():(this._model=new I.core.Array,this._model.init(),this._model_allocated=!0,this._model.bindChange(null,this,this._modelChanged)),this._model.add.apply(this._model,a),this._modelChanged())},get:function(){return this._model._data.slice()}}});p.AbstractList=D;var J=function(a){this.parent=
h;this.parent(a);this.constructor=J};J.prototype={_index:0,_pressed:!1,_visible:!0,didSelect:function(){}};f.extendClass(J,h);f.defineClassProperties(J,{pressed:{set:function(a){this.view&&(a?(this.addClassName("pressed"),this._pressed=!0):(this.removeClassName("pressed"),this._pressed=!1))},get:function(){return this._pressed}},index:{set:function(a){this._index=a},get:function(){return this._index}}});T.prototype={_title:"",_label:"",set title(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=
""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&(f.setElementInnerText(this.view,this._title),this.view.appendChild(this._label_view))},set label(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._label=a;this.view&&f.setElementInnerText(this._label_view,this._label);this._label&&!this._label_view.parentNode&&this.view.appendChild(this._label_view);!this._label&&this._label_view.parentNode&&
this.view.removeChild(this._label_view)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=document.createElement("li"));J.prototype.initComponent.call(this);this._label_view=document.createElement("span")}};f.extendClass(T,J);W.prototype={_title:"",set title(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._title=a;this.view&&f.setElementInnerText(this.title_view,
this._title)},initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;if(!this.__config__.node){this.__config__.node=document.createElement("div");this.__config__.node.className="simplelist_item";var a=document.createElement("div");a.className="title";this.__config__.node.appendChild(a)}J.prototype.initComponent.call(this);this._label_view=document.createElement("span");this.title_view=this.view.querySelector(".title")}};f.extendClass(W,h);t.FILTER_EXACTS=0;t.FILTER_CONTAINS=
1;t.FILTER_STARTS_WITH=2;t.BLOCK_LIST="BlockList";t.TAB_LIST="TabList";t.DEFAULT_LIST="DefaultList";t.prototype={_type:t.DEFAULT_LIST,_selected_item:0,_filters:null,_has_arrow:!0,__item_obs:null,__elem:null,__template_obj:null,add:function(a){this.setItemTemplate(a)},setItemTemplate:function(a){a&&(f.isFunction(a)?this.__template_obj=(new a).init():a.constructor&&(this.__template_obj=a))},setItemTemplateName:function(a){return this.createAndAddComponent(a,{},"item_children")},remove:function(){},
destructor:function(){this._freeListItems();D.prototype.destructor.call(this)},initComponent:function(){D.prototype.initComponent.call(this);this.addClassName(this._type);this.refresh()},getItems:function(){return this.__item_obs?this.__item_obs.slice():[]},applyFilters:function(){if(this._filters&&this.__item_obs){var a,b,c;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],c=this._model.item(b.index),this.appyFiltersOnObj(b,c)}},appyFiltersOnObj:function(a,b){if(this._filters&&a&&b){var c,
e,d,f,g,h=this._filters.length;if(0===h)a.show();else for(c=0;c<h;c++)if(e=this._filters[c],!e.property||!e.value)a.show();else{d=!1;f=b[e.property];g=e.value;!1===e.strict&&(f=f.toLowerCase(),g=g.toLowerCase());switch(e.matching){case void 0:case null:case t.FILTER_EXACTS:f!==g&&(d=!0);break;case t.FILTER_STARTS_WITH:0!==f.indexOf(g)&&(d=!0);break;case t.FILTER_CONTAINS:-1===f.indexOf(g)&&(d=!0)}d?a.hide():a.show()}}},_freeListItems:function(){var a,b;for(a=0;a<this.__item_obs.length;a++)b=this.__item_obs[a],
b.__parent=void 0,f.free(b);this.__item_obs=[]},_renderData:ca,_modelChanged:function(){this._renderData(this._items_selectable);this.refresh();this._clearScroll()},_touchItemFeedback:function(a){a._comp_.pressed=!0},_untouchItemFeedback:function(a){a._comp_.pressed=!1},_updateSelectItem:function(a){this._selected_item=a._comp_.index;a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();this.propertyChange();this.propagate("itemselect",{index:this._selected_item,item:this._model.item(this._selected_item)})},
init_directAccessBar:function(){this._direct_access=document.createElement("div");this._direct_access.className="direct_access";this.view.appendChild(this._direct_access);this._acces_index=0;var a=this,b,c,e=function(e){e.stopPropagation();e.preventDefault();!b||!c?e=0:(e=e.pageY-c.y,0>e?e=0:e>b.height&&(e=b.height-1),e=Math.floor(e*a._direct_access.childElementCount/b.height));f.isNumber(e)&&a._acces_index!==e&&(a._acces_index=e,e=-a.getTitlePosition(e),e<a.__max_scroll&&(e=a.__max_scroll),a.__scroll_start=
e,s?f.setElementTransform(a._list_items,"translate3d(0,"+e+"px,0)"):f.setElementTransform(a._list_items,"translate(0,"+e+"px)"),a._scrollbar&&a._scrollbar.setPosition(e),a._isScrolling&&a._isScrolling())},d=function(){document.removeEventListener(g.POINTER_MOVE,e);document.removeEventListener(g.POINTER_END,d);a._endScrolling&&a._endScrolling()};this._direct_access.addEventListener(g.POINTER_START,function(h){h.stopPropagation();h.preventDefault();a._list_items.style.webkitTransition="";a.__max_scroll=
a.size[1]-a._list_items.offsetHeight;document.addEventListener(g.POINTER_MOVE,e,!1);document.addEventListener(g.POINTER_END,d,!1);h=h.srcElement._index_;f.isNumber(h)&&a._acces_index!==h&&(a._acces_index=h,h=-a.getTitlePosition(h),h<a.__max_scroll&&(h=a.__max_scroll),a.__scroll_start=h,s?f.setElementTransform(a._list_items,"translate3d(0,"+h+"px,0)"):f.setElementTransform(a._list_items,"translate(0,"+h+"px)"),a._scrollbar&&a._scrollbar.setPosition(h),b=f.getElementDimensions(a._direct_access),b.height-=
10,c=f.getElementAbsolutePosition(a._direct_access),c.y+=5,a._startScrolling&&a._startScrolling())},!1)},getTitlePosition:function(a){a=this.view.querySelectorAll("ul > li > div").item(a);return!a?void 0:a.parentElement.offsetTop}};f.extendClass(t,D);f.defineClassProperties(t,{itemsSelectable:{set:function(a){if(!(a&&this._items_selectable||!a&&!this._items_selectable))if(a){this._items_selectable=!0;for(i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],obj.view.addEventListener(g.POINTER_START,
this,!0)}else{this._items_selectable=!1;for(i=0;i<this.__item_obs.length;i++)obj=this.__item_obs[i],obj.view.removeEventListener(g.POINTER_START,this,!0)}}},selectedItem:{get:function(){return this._selected_item}},type:{set:function(a){f.isString(a)&&!(a!==t.BLOCK_LIST&&a!==t.TAB_LIST&&a!==t.DEFAULT_LIST)&&(this.removeClassName(this._type),this._type=a,this.addClassName(this._type),this._type===t.BLOCK_LIST&&(this._renderData=la,this._direct_access&&(this.view.removeChild(this._direct_access),delete this._direct_access)),
this._type===t.TAB_LIST&&(this._renderData=ma,this._direct_access||this.init_directAccessBar()),this._type===t.DEFAULT_LIST&&(this._renderData=ca,this._direct_access&&(this.view.removeChild(this._direct_access),delete this._direct_access)),this._renderData(this._items_selectable))}},hasArrow:{set:function(a){a?(this._has_arrow=!0,this.addClassName("arrow")):(this._has_arrow=!1,this.removeClassName("arrow"))}},filters:{set:function(a){f.isArray(a)&&(this._filters=a,this.applyFilters(),this.refresh())},
get:function(){return this._filters}}});p.List=t;p.AbstractListItem=J;p.DefaultListItem=T;p.SimpleListItem=W;z.NORMAL_MODE=1;z.NATIVE_MODE=2;z.prototype={_mode:z.NORMAL_MODE,_data:null,_selected_item:null,_items:null,destructor:function(){this._mode===z.NATIVE_MODE?(this.view.removeEventListener(g.POINTER_START,this),this.view.removeEventListener(g.POINTER_END,this)):(this.nodeUnbind(this._select,"change"),this.nodeUnbind(this._select,"blur"));h.prototype.destructor.call(this)},update_gui_combo_box:function(){if(f.isArray(this._data))if(this._mode===
z.NORMAL_MODE){this._select.innerHTML="";this._items={};var a,b;for(a=0;a<this._data.length;a++)b=document.createElement("option"),b.appendChild(document.createTextNode(this._data[a])),this._items[this._data[a]]=b,this._select.appendChild(b);this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0}else f.setElementInnerText(this._select,this._selected_item)},initComponent:function(){h.prototype.initComponent.call(this);window.device&&(-1!==window.device.platform.indexOf("iPhone")||
-1!==window.device.platform.indexOf("iPad")||-1!==window.device.platform.indexOf("Android"))&&window.plugins.combo_picker?(this._mode=z.NATIVE_MODE,this._select=document.createElement("div"),this.view.appendChild(this._select),this.view.addEventListener(g.POINTER_START,this),this.view.addEventListener(g.POINTER_END,this)):(this._mode=z.NORMAL_MODE,this._select=document.createElement("select"),this.view.appendChild(this._select),this.nodeBind(this._select,"change"),this.nodeBind(this._select,"blur"));
this.update_gui_combo_box()},handleEvent:function(a){a.preventDefault();a.stopPropagation();a.type===g.POINTER_START&&(this.setFocus(),window.plugins.combo_picker.show(this,this._data,this._selected_item))},setFocus:function(){this._mode===z.NATIVE_MODE?this.addClassName("focus"):this._select.focus()},setBlur:function(){this._mode===z.NATIVE_MODE?this.removeClassName("focus"):this._select.blur()},notify:function(a){"change"===a.type?(this._selected_item=this._select.value,this.propertyChange(),this.propagate("change",
this._selected_item)):"blur"===a.type&&window.scrollTo(0,0)}};f.extendClass(z,h);f.defineClassProperties(z,{selectedItem:{set:function(a){f.isString(a)&&(this._selected_item=a,this._mode===z.NORMAL_MODE?this._selected_item?this._select.value=this._selected_item:this._select.selectedIndex=0:f.setElementInnerText(this._select,this._selected_item))},get:function(){return this._selected_item}},data:{set:function(a){f.isArray(a)&&(this._data=a.slice(),this.update_gui_combo_box())}}});p.ComboBox=z;O.prototype=
{_selected_index:-1,_items:null,clean_gui:function(){var a;this.__scroll_start=0;for(this._list_items.innerHTML="";this._items.length;)a=this._items[0],a.removeEventListener(g.POINTER_START,this),a.removeEventListener("click",this),this._items.remove(0)},_renderData:function(){if(this._model){var a,b,c,e;if(this._list_items){this.clean_gui();this._selected_index=-1;for(a=0,e=this._model.length;a<e;a++)c=this._model.item(a),b=document.createElement("input"),b.type="radio",b.name=this._id,b.value=a,
b.id=this._id+"_l"+a,this._list_items.appendChild(b),this._items[a]=b,b.addEventListener(g.POINTER_START,this),b.addEventListener("click",this),label=document.createElement("label"),label.value=a,label.for=this._id+"_l"+a,label.addEventListener(g.POINTER_START,this),label.addEventListener("click",this),f.setElementInnerText(label,c),this._list_items.appendChild(label);this.refresh()}else console.error("vs.ui.RadioButton uncorrectly initialized.")}},_touchItemFeedback:function(a){f.addClassName(a,
"pressed")},_untouchItemFeedback:function(a){f.removeClassName(a,"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this._items.length)this.selectedIndex=b,this.propertyChange(),this.propagate("change",{index:this._selected_index,item:this._model.item(this._selected_index)})}};f.extendClass(O,D);f.defineClassProperty(O,"selectedIndex",{set:function(a){f.isNumber(a)||(a=parseInt(a));if(!isNaN(a)&&!(0>a||a>this._items.length-
1)&&this._items[a]){var b=this._items[a];b&&(b.checked=!0);this._selected_index=a}},get:function(){return this._selected_index}});p.RadioButton=O;P.prototype={_selected_indexes:null,_items:null,selectItem:function(a){if(f.isNumber(a)&&!(0>a||a>=this._items.length)){var b=this._items[a];if(b){for(var c=0;c<this._selected_indexes.length;c++)if(this._selected_indexes[c]===a){this._selected_indexes.remove(c);b.checked=!1;return}this._selected_indexes.push(a);b.checked=!0}}},clean_gui:function(){var a;
this.__scroll_start=0;for(this._list_items.innerHTML="";this._items.length;)a=this._items[0],a.removeEventListener(g.POINTER_START,this),a.removeEventListener("click",this),this._items.remove(0)},_renderData:function(){if(this._model){var a,b,c;if(this._list_items){this._selected_indexes=[];this.clean_gui();for(a=0,b=this._model.length;a<b;a++)c=this._model.item(a),input=document.createElement("input"),input.type="checkbox",input.name=this._id,input.id=this._id+"_l"+a,input.value=a,this._list_items.appendChild(input),
this._items[a]=input,input.addEventListener(g.POINTER_START,this),input.addEventListener("click",this),label=document.createElement("label"),label.value=a,label.for=this._id+"_l"+a,label.addEventListener(g.POINTER_START,this),label.addEventListener("click",this),f.setElementInnerText(label,c),this._list_items.appendChild(label);this.selectedItem=this._selected_indexes}else console.error("vs.ui.RadioButton uncorrectly initialized.")}},_touchItemFeedback:function(a){f.addClassName(a,"pressed")},_untouchItemFeedback:function(a){f.removeClassName(a,
"pressed")},_updateSelectItem:function(a){var b=parseInt(a.value);a._comp_&&a._comp_.didSelect&&a._comp_.didSelect();if(0<=b||b<this._items.length){this.selectItem(b);this.propertyChange();items=[];for(i=0,l=this._selected_indexes.length;i<l;i++)items.push(this._model.item(this._selected_indexes[i]));this.propagate("change",{indexes:this._selected_indexes.slice(),items:items})}}};f.extendClass(P,D);f.defineClassProperty(P,"selectedIndexes",{set:function(a){if(f.isArray(a)){var b,c;this._selected_indexes=
[];for(c=0;c<a.length;c++)b=a[c],f.isNumber(b)&&this._selected_indexes.push(b);for(c=0;c<this._items.length;c++)if(b=this._items[c])b.checked=!1;a=this._selected_indexes.length;for(c=0;c<a;c++)if(b=this._items[this._selected_indexes[c]])b.checked=!0}},get:function(){return this._selected_indexes.slice()}});p.CheckBox=P;G.DEFAULT_STYLE="blue_style";G.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";G.BLACK_STYLE="black_style";G.prototype={_hide_animation:null,_show_animation:null,_style:G.DEFAULT_STYLE,
_states:null,_current_state:null,destructor:function(){h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);var a=window.deviceConfiguration.os;this._hide_animation=a==o.OS_SYMBIAN?new fx.Animation(["translateY","-50px"]):new fx.Animation(["translateY","-44px"]);this._show_animation=new fx.Animation(["translateY","0px"]);a=window.deviceConfiguration.os;a==o.OS_SYMBIAN?f.setElementStyle(this.view,{left:"0px",top:"0px",bottom:"auto",width:"100%",height:"50px"}):
f.setElementStyle(this.view,{left:"0px",top:"0px",bottom:"auto",width:"100%",height:"44px"});this.style=this._style},setStateItems:function(a,b){var c;if(a&&f.isString(a)&&b&&f.isArray(b))if(this._states[a]=b.slice(),this._current_state===a){for(key in this._children)if(children=this._children[key],f.isArray(children))for(c=0;c<children.length;c++)obj=children[c],0<=b.findItem(obj)||obj&&obj.hide&&obj.hide();else children.hide&&children.hide();for(c=0;c<b.length;c++)obj=b[c],this.isChild(obj)||this.add(obj,
"children"),obj.show()}else for(c=0;c<b.length;c++)obj=b[c],this.isChild(obj)||this.add(obj,"children")},getStateItems:function(a){if(a&&f.isString(a)&&this._states[a])return this._states[a].slice()},changeState:function(a,b){if(a){var c=0,e,d,g,h,j;this._current_state=a;(g=this._states[this._current_state])||(g=[]);e=g.length;for(j in this._children)if(d=this._children[j],f.isArray(d))for(c=0;c<d.length;c++)h=d[c],0<=g.findItem(h)||h&&h.hide&&h.hide();else d.hide&&d.hide();for(c=0;c<e;c++){h=g[c];
if(b&&b[h.id])for(j in d=b[h.id],d)j&&(h[j]=d[j]);h&&h.show()}}},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case g.POINTER_START:f.addClassName(b,"active");a.currentTarget.addEventListener(g.POINTER_END,this,!0);a.currentTarget.addEventListener(g.POINTER_MOVE,this,!0);break;case g.POINTER_END:a.currentTarget.removeEventListener(g.POINTER_END,this);a.currentTarget.removeEventListener(g.POINTER_MOVE,this);setTimeout(function(){f.removeClassName(b,"active")},200);this.propagate("buttonselect",
a.currentTarget.spec);break;case g.POINTER_MOVE:a.preventDefault(),setTimeout(function(){f.removeClassName(b,"active")},200),a.currentTarget.removeEventListener(g.POINTER_END,this),a.currentTarget.removeEventListener(g.POINTER_MOVE,this)}},remove:function(a){var b,c;h.prototype.remove.call(this,a);for(b in this._states)c=this._states[b],-1!==c.indexOf(a)&&c.remove(a)}};f.extendClass(G,h);f.defineClassProperties(G,{style:{set:function(a){f.isString(a)&&(this._style&&this.removeClassName(this._style),
this._style=a,this.addClassName(this._style))},get:function(){return this._style}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,this.view.offsetHeight]}}});p.NavigationBar=G;d.DEFAULT_STYLE="black_style";d.BLACK_TRANSLUCIDE_STYLE="black_translucide_style";d.BLUE_STYLE="blue_style";d.LEFT_POSITION="left";d.RIGHT_POSITION="right";d.prototype={_hide_animation:null,_show_animation:null,_style:d.DEFAULT_STYLE,
_configuration:[],_items:null,destructor:function(){h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this._hide_animation=new fx.Animation(["translateY","44px"]);this._show_animation=new fx.Animation(["translateY","0px"]);f.setElementStyle(this.view,{left:"0px",top:"auto",bottom:"0px",width:"100%",height:"44px"});this.style=this._style},notify:function(a){this.propagate("itemselect",a.data)},addButton:function(a,b,c){if(!this._items[a]){var e=new d.Button({id:a});
e.init();c&&(e.position=c);e.name=b;this.add(e,"children");e.bind("select",this);return this._items[a]=e}},addItem:function(a){a&&!this._items[a.id]&&(this.add(a,"children"),a.bind("select",this),this._items[a.id]=a)},removeItem:function(a){var b=this._items[a];if(b){try{this.remove(b)}catch(c){}b.unbind("select",this);delete this._items[a]}}};f.extendClass(d,h);f.defineClassProperties(d,{style:{set:function(a){f.isString(a)&&(this._style&&this.removeClassName(this._style),this._style=a,this.addClassName(this._style))},
get:function(){return this._style}},configuration:{set:function(a){if(f.isArray(a)){var b,c;this._configuration=a;for(b in this._items)this.removeItem(b);for(b=0;b<a.length;b++)c=a[b],this.addButton(c[0],c[1],c[2])}}},position:{set:function(){},get:function(){return[this.view.offsetLeft,this.view.offsetTop]}},size:{set:function(){},get:function(){return[this.view.offsetWidth,this.view.offsetHeight]}}});d.Item=function(a){this.parent=h;this.parent(a);this.constructor=d.Item};d.Item.prototype={_position:d.LEFT_POSITION,
initComponent:function(){h.prototype.initComponent.call(this);this.view.appendChild(document.createElement("div"));this.addClassName(this._position);this.view.addEventListener(g.POINTER_START,this,!0)},handleEvent:function(a){var b=a.currentTarget;switch(a.type){case g.POINTER_START:f.addClassName(b,"active");a.currentTarget.addEventListener(g.POINTER_END,this,!0);a.currentTarget.addEventListener(g.POINTER_MOVE,this,!0);break;case g.POINTER_END:a.currentTarget.removeEventListener(g.POINTER_END,this);
a.currentTarget.removeEventListener(g.POINTER_MOVE,this);window.setTimeout(function(){f.removeClassName(b,"active")},200);this.propagate("select",this.id);break;case g.POINTER_MOVE:a.preventDefault(),window.setTimeout(function(){f.removeClassName(b,"active")},200),a.currentTarget.removeEventListener(g.POINTER_END,this),a.currentTarget.removeEventListener(g.POINTER_MOVE,this)}}};f.extendClass(d.Item,h);f.defineClassProperty(d.Item,"position",{set:function(a){a!==d.LEFT_POSITION&&a!==d.RIGHT_POSITION||
(this._position&&this.removeClassName(this._position),this._position=a,this.addClassName(this._position))},get:function(){return this._position}});d.Text=function(a){this.parent=d.Item;this.parent(a);this.constructor=d.Text};d.Text.prototype={_text:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=document.createElement("div"),this.__config__.node.className="vs_ui_toolbar_text");d.Item.prototype.initComponent.call(this);
var a,b;this._text_view=document.createElement("div");this._text_view.className="text_view";this.view.appendChild(this._text_view);a=document.createElement("div");a.className="glow_view";this.view.appendChild(a);b=document.createElement("div");a.appendChild(b)}};f.extendClass(d.Text,d.Item);f.defineClassProperty(d.Text,"text",{set:function(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this._text_view&&f.setElementInnerText(this._text_view,
this._text)},get:function(){return this._text}});d.Button=function(a){this.parent=d.Item;this.parent(a);this.constructor=d.Button};d.Button.prototype={_name:"",initComponent:function(){this.__config__||(this.__config__={});this.__config__.id=this.id;this.__config__.node||(this.__config__.node=document.createElement("div"),this.__config__.node.className="vs_ui_toolbar_button");d.Item.prototype.initComponent.call(this);this.size=[30,30]},setImage:function(a){this.view.style.backgroundImage="url("+a+
")"}};f.extendClass(d.Button,d.Item);f.defineClassProperty(d.Button,"name",{set:function(a){f.isString(a)&&(this._name=a,this.addClassName(this._name))},get:function(){return this._name}});d.BUTTON_ADD="add";d.BUTTON_ARROW_DOWN="arrow_down";d.BUTTON_ARROW_LEFT="arrow_left";d.BUTTON_ARROW_RIGHT="arrow_right";d.BUTTON_ARROW_UP="arrow_up";d.BUTTON_ATTACH="attach";d.BUTTON_AUCTION="auction";d.BUTTON_BELL_OFF="bell_off";d.BUTTON_BELL="bell";d.BUTTON_BLOG="blog";d.BUTTON_BOOK_MARKED="book_marked";d.BUTTON_BOOK=
"book";d.BUTTON_BOOKMARK_ADD="bookmark_add";d.BUTTON_BOORMARK="bookmark";d.BUTTON_BOX_FULL="box_full";d.BUTTON_BOX_MAIL="box_mail";d.BUTTON_BOX="box";d.BUTTON_BRIGHTNESS="brightness";d.BUTTON_BRUSH="brush";d.BUTTON_BULB_OFF="bulb_off";d.BUTTON_BULB_ON="bulb_on";d.BUTTON_BUZZER="buzzer";d.BUTTON_CALCULATOR="calculator";d.BUTTON_CALENDAR="calendar";d.BUTTON_CALL="call";d.BUTTON_CANCEL="cancel";d.BUTTON_CASE="case";d.BUTTON_CHECKMARK="checkmark";d.BUTTON_CIRCLE_ARROW_LEFT="circle_arrow_left";d.BUTTON_CIRCLE_ARROW_RIGHT=
"circle_arrow_right";d.BUTTON_COMMAND_LINE="command_line";d.BUTTON_COMMENT_ADD="command_add";d.BUTTON_COMMENT_DELETE="command_delete";d.BUTTON_COMMENT_OK="command_ok";d.BUTTON_COMPUTER_OFF="computer_off";d.BUTTON_COMPUTER_ON="computer_on";d.BUTTON_CONSTRAST="contrast";d.BUTTON_CONTROL_1="controls_1";d.BUTTON_CONTROL_2="controls_2";d.BUTTON_CONTROL_3="controls_3";d.BUTTON_CONTROL_4="controls_4";d.BUTTON_CONTROL_5="controls_5";d.BUTTON_CONTROL_6="controls_6";d.BUTTON_CONTROL_7="controls_7";d.BUTTON_CONTROL_8=
"controls_8";d.BUTTON_COPY="copy";d.BUTTON_COURT="court";d.BUTTON_CREDIT_CARD="credit_card";d.BUTTON_CUT="cut";d.BUTTON_DANGER="danger";d.BUTTON_DELETE="delete";d.BUTTON_DISK="disk";d.BUTTON_DOCUMENT_BLANK="document_blank";d.BUTTON_DOCUMENT="document";d.BUTTON_DOLLAR="dollar";d.BUTTON_DOWNLAOD="download";d.BUTTON_ERROR="error";d.BUTTON_FAVORITIES_ADD="favorities_add";d.BUTTON_FAVORITIES_REMOVE="favorities_remove";d.BUTTON_FAVORITIES="favorities";d.BUTTON_FILM="film";d.BUTTON_FILMING="filming";d.BUTTON_FIRST_AID=
"first_aid";d.BUTTON_FLAG_BIS="flag_1";d.BUTTON_FLAG="flag";d.BUTTON_FLASH_ARROW="flash_arrow";d.BUTTON_FLASH="flash";d.BUTTON_FOLDER_BOOKMARCK="folder_bookmark";d.BUTTON_FOLDER_GOTO="folder_goto";d.BUTTON_FOLDER="folder";d.BUTTON_FONT_CAPITAL="font_capital";d.BUTTON_FONT_ITALIC="font_italic";d.BUTTON_FONT_REGULAR="font_regular";d.BUTTON_FONT_UNDERLINE="font_undeline";d.BUTTON_FONT="font";d.BUTTON_FONTS="fonts";d.BUTTON_FORUM="forum";d.BUTTON_FRAME="frame";d.BUTTON_GRAPH_AREAS="graph_areas";d.BUTTON_GRAPH_BARS_DOWN=
"graph_bars_down";d.BUTTON_GRAPH_BARS_UP="graph_bars_up";d.BUTTON_GRAPH_BARS="graph_bars";d.BUTTON_GRAPH_DOWN="graph_down";d.BUTTON_GRAPH_LINES="graph_lines";d.BUTTON_GRAPH_UP="graph_up";d.BUTTON_HAT="hat";d.BUTTON_HELP="help";d.BUTTON_HOME="home";d.BUTTON_INFORMATION="information";d.BUTTON_KEY="key";d.BUTTON_KEYBOARD="keyboard";d.BUTTON_LAPTOP="laptop";d.BUTTON_LINK="links";d.BUTTON_LIST_BULLETS="bullets";d.BUTTON_LIST_NUMBERS="list_numbers";d.BUTTON_LOCK="lock";d.BUTTON_MAGNIFY_GLASS="magnify_glass";
d.BUTTON_MAIL="mail";d.BUTTON_MANAGE="manage";d.BUTTON_MEASURE="measure";d.BUTTON_MEASURES="measures";d.BUTTON_MIC_BIS="mic_bis";d.BUTTON_MIC="mic";d.BUTTON_MINUS="minus";d.BUTTON_MUTE="mute";d.BUTTON_PAINT="pain";d.BUTTON_PAPER_PLANE="paper_plane";d.BUTTON_PAPER_TRASH="paper_trash";d.BUTTON_PAPERCLIO="paperclio";d.BUTTON_PARAGRAPH="paragraph";d.BUTTON_PENCIL="pencil";d.BUTTON_PHOTO="photo";d.BUTTON_PIECHART="113";d.BUTTON_POST="post";d.BUTTON_PROFILE="profile";d.BUTTON_REFRESH="refresh";d.BUTTON_RESIZE=
"resize";d.BUTTON_RSS="rss";d.BUTTON_SAD_FACE="sade_face";d.BUTTON_SAFE="safe";d.BUTTON_SAVE="save";d.BUTTON_SETTINGS="settings";d.SHOPPING_BAG="shopping_bag";d.SHOPPING_CART="shopping_cart";d.SHOPPING_HEAVY="shopping_heavy";d.SIM="sim";d.SMILE_FACE="smile_face";d.SORT_AZ="sort_az";d.SORT_ZA="sort_za";d.STAR="star";d.STORAGE="storage";d.SWITCH="switch";d.TAG_ADD="tag_add";d.TAG_CANCEL="tag_cancel";d.TAG_DELETE="tag_delete";d.TAG="tag";d.TEXT_ALIGN_CENTER="text_align_center";d.TEXT_ALIGN_JUSTIFY="text_align_justify";
d.TEXT_ALIGN_LEFT="text_align_left";d.TEXT_ALIGN_RIGHT="text_align_right";d.TIME="time";d.TIMER="timer";d.TRASH="trash";d.TWG="twg";d.UNLOCK="unlock";d.UPLOAD="upload";d.USER="user";d.USERS="users";d.VOLUME_DOWN="volume_down";d.VOLUME_UP="volume_up";d.VOLUME="volume";d.WALLET="wallet";d.WARNING="warning";d.WIFI="wifi";d.WINDOW_ERROR="window_error";d.WINDOW_GLOBE="window_globe";d.WINDOW_LOCK="window_lock";d.WINDOW="window";d.ZOOM_IN="zoom_in";d.ZOMM_OUT="zoom_out";p.ToolBar=d;Q.prototype={_text:"",
destructor:function(){h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this._text&&f.setElementInnerText(this.view,this._text)}};f.extendClass(Q,h);f.defineClassProperty(Q,"text",{set:function(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text=a;this.view&&f.setElementInnerText(this.view,this._text)},get:function(){return this._text}});p.TextLabel=Q;A.prototype={canvas_ctx:null,
canvas_node:null,destructor:function(){h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);if(this.canvas_node=this.view.firstChild)this.canvas_ctx=this.canvas_node.getContext("2d"),this.canvas_node.width=this._size[0],this.canvas_node.height=this._size[1],this.draw(0,0,this._size[0],this._size[1])},getContext:function(){return this.canvas_ctx},drawRect:function(a,b,c,e,d,f){if(4===arguments.length)this.rect(a,b,c,e).stroke();else if(f){Math.sin(f);Math.cos(f);
var g=[a,b],h=this.rotatePoint(c,0,f);g.push(a+h[0],b+h[1]);h=this.rotatePoint(c,e,f);g.push(a+h[0],b+h[1]);h=this.rotatePoint(0,e,f);g.push(a+h[0],b+h[1]);d&&g.push(d);this.polygon.apply(this,g)}else this.polygon(a,b,a+c,b,a+c,b+e,a,b+e,d);return this},rotatePoint:function(a,b,c){return[a*Math.cos(c)-b*Math.sin(c),b*Math.cos(c)+a*Math.sin(c)]},polygon:function(){if(6>arguments.length)throw Error("not enough arguments");var a,b,c,e;this.beginPath();if(0===arguments.length%2){this.moveTo(arguments[0],
arguments[1]);for(a=2;a<arguments.length;a+=2)this.lineTo(arguments[a],arguments[a+1])}else{b=arguments[arguments.length-1];c=(arguments.length-1)/2;a=(arguments[2*c-2]+arguments[0])/2;e=(arguments[2*c-1]+arguments[1])/2;this.moveTo(a,e);for(a=0;a<c-1;a++)this.arcTo(arguments[2*a],arguments[2*a+1],arguments[2*a+2],arguments[2*a+3],b);this.arcTo(arguments[2*c-2],arguments[2*c-1],arguments[0],arguments[1],b)}this.closePath();this.moveTo(arguments[0],arguments[1]);this.stroke();return this},ellipse:function(a,
b,c,e,d,f,g,h){void 0===d&&(d=0);void 0===f&&(f=0);void 0===g&&(g=2*Math.PI);void 0===h&&(h=!1);var j=this.rotatePoint(c*Math.cos(f),e*Math.sin(f),d),k=a+j[0],j=b+j[1];this.rotatePoint(c*Math.cos(g),e*Math.sin(g),d);this.moveTo(k,j);this.translate(a,b);this.rotate(d);this.scale(c/e,1);this.arc(0,0,e,f,g,h);this.scale(e/c,1);this.rotate(-d);this.translate(-a,-b);this.stroke();return this},load:function(a){var b=window.innerWidth-25;this.__iframe=document.createElement("iframe");this.__iframe.id="canvas_load_iframe";
this.__iframe.height="10px";this.__iframe.width=b+"px";this.__iframe.style.visibility="hidden";this.__iframe.src=a;this.nodeBind(this.__iframe,"load","remotePageLoaded");document.body.appendChild(this.__iframe)},remotePageLoaded:function(){var a=this.__iframe.contentWindow,b=window.innerWidth-25,c=window.innerHeight;this.clearRect(0,0,this._size[0],this._size[1]);this.save();this.scale(this._size[0]/b,this._size[1]/c);this.canvas_ctx.drawWindow(a,0,0,b,c,"rgb(255,255,255)");this.restore()},draw:function(a,
b,c,e){a||(a=0);b||(b=0);c||(c=this._size[0]);e||(e=this._size[1]);this.clearRect(a,b,c,e);this.lineWidth=3;this.shadowColor="white";this.shadowBlur=1;for(var d,f,g,a=0;10>a;a++)this.strokeStyle="rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",b=Math.floor(Math.random()*c),d=Math.floor(Math.random()*e),f=Math.floor(Math.random()*c),g=Math.floor(Math.random()*e),this.beginPath(),this.moveTo(b,d),this.lineTo(f,g),this.closePath(),this.stroke()}};
f.extendClass(A,h);A.methods="arc,arcTo,beginPath,bezierCurveTo,clearRect,clip,closePath,createImageData,createLinearGradient,createRadialGradient,createPattern,drawFocusRing,drawImage,fill,fillRect,fillText,getImageData,isPointInPath,lineTo,measureText,moveTo,putImageData,quadraticCurveTo,rect,restore,rotate,save,scale,setTransform,stroke,strokeRect,strokeText,transform,translate".split(",");A.props="canvas,fillStyle,font,globalAlpha,globalCompositeOperation,lineCap,lineJoin,lineWidth,miterLimit,shadowOffsetX,shadowOffsetY,shadowBlur,shadowColor,strokeStyle,textAlign,textBaseline".split(",");
A.setup=function(){var a,b;for(a=0;a<A.methods.length;a++)b=A.methods[a],A.prototype[b]=function(a){return function(b,c,d,f,g,h,j,k,m){this.canvas_ctx[a](b,c,d,f,g,h,j,k,m);return this}}(b);for(a=0;a<A.props.length;a++){b=A.props[a];var c={enumerable:!0};c.set=function(a){return function(b){this.canvas_ctx[a]=b}}(b);c.get=function(a){return function(){return this.canvas_ctx[a]}}(b);f.defineProperty(A.prototype,b,c)}};A.setup();f.defineClassProperty(A,"size",{set:function(a){if(a&&f.isArray(a)&&2===
a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view)){this._updateSize();if(!this.canvas_node){this.canvas_node=this.view.firstChild;if(!this.canvas_node){console.error("Uncompatible canvas view");return}this.canvas_ctx=this.canvas_node.getContext("2d")}this.canvas_node.width=this._size[0];this.canvas_node.height=this._size[1];this.draw(0,0,this._size[0],this._size[1])}},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,
this._size[1]=this.view.offsetHeight);return this._size.slice()}});p.Canvas=A;B.BORDER_WIDTH_IOS=5;B.BORDER_WIDTH_ANDROID=5;B.BORDER_WIDTH_WP7=0;B.BORDER_WIDTH_SYMBIAN=0;B.BORDER_WIDTH_BB=1;B.prototype={__inner_view:null,_index:0,_indeterminate:!1,_range:null,__border_width:0,destructor:function(){h.prototype.destructor.call(this)},_updateSize:function(){f.setElementSize(this.view,this._size[0],this._size[1]);this.index=this._index},initComponent:function(){h.prototype.initComponent.call(this);this.__inner_view=
this.view.firstElementChild;this.indeterminate=this._indeterminate;var a=window.deviceConfiguration.os;a==o.OS_ANDROID?this.__border_width=2*B.BORDER_WIDTH_ANDROID:a==o.OS_IOS?this.__border_width=2*B.BORDER_WIDTH_IOS:a==o.OS_WP7?this.__border_width=2*B.BORDER_WIDTH_WP7:a==o.OS_SYMBIAN?this.__border_width=2*B.BORDER_WIDTH_SYMBIAN:a==o.OS_BLACK_BERRY&&(this.__border_width=2*B.BORDER_WIDTH_BB);this.index=this._index}};f.extendClass(B,h);f.defineClassProperties(B,{index:{set:function(a){if(f.isNumber(a)&&
(this._index=a,this.__inner_view)){var b=this.size[0],b=b-this.__border_width,a=b*(this._index-this._range[0])/(this._range[1]-this._range[0]);a>b&&(a=b);0>a&&(a=0);b=window.deviceConfiguration.os;this.__inner_view.style.width=b===o.OS_ANDROID||b===o.OS_IOS?a+this.__border_width+"px":a+"px"}},get:function(){return this._index}},range:{set:function(a){if(f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.index=this._index},
get:function(){return this._range.slice()}},indeterminate:{set:function(a){a?(this._indeterminate=!0,this.view&&f.addClassName(this.view,"indeterminate")):(this._indeterminate=!1,this.view&&f.removeClassName(this.view,"indeterminate"))},get:function(){return this._indeterminate}}});p.ProgressBar=B;H.HORIZONTAL=0;H.VERTICAL=1;H.prototype={_orientation:H.HORIZONTAL,_value:0,_range:null,__v:0,__drag_x:0,__drag_y:0,__handle:null,__handle_width:0,__handle_delta:10,destructor:function(){this.__handle.removeEventListener(g.POINTER_START,
this,!0);h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);var a=window.deviceConfiguration.os;a==o.OS_WP7?this.__handle_width=30:a==o.OS_ANDROID?this.__handle_width=34:a==o.OS_BLACK_BERRY?(this.__handle_width=35,this.__handle_height=12,this.__handle_delta=3):this.__handle_width=23;this.__handle=this.view.querySelector(".handle");this.__handle.addEventListener(g.POINTER_START,this,!0);this.orientation=this._orientation;this.value=this._value},handleEvent:function(a){var b,
c;if(a.type===g.POINTER_START){if(g.EVENT_SUPPORT_TOUCH&&1<a.touches.length)return;a.stopPropagation();a.preventDefault();b=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY;c=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageX:a.pageX;this.__drag_x=c;this.__drag_y=b;this.__v=this._value;this.__handle_width=this.__handle.offsetWidth;document.addEventListener(g.POINTER_MOVE,this,!0);document.addEventListener(g.POINTER_END,this,!0);this.__handle.addEventListener(g.POINTER_END,this,!0);return!1}if(a.type===g.POINTER_MOVE){if(g.EVENT_SUPPORT_TOUCH&&
1<a.touches.length)return;a.stopPropagation();a.preventDefault();b=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY;c=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageX:a.pageX;0===this._orientation?(a=this.view.offsetWidth-this.__handle_width,b=this.__drag_x-c):(a=this.view.offsetHeight-this.__handle_width,b=this.__drag_y-b);this.value=this.__v-b*(this._range[1]-this._range[0])/a;this.propertyChange();this.propagate("continuous_change",this._value);return!1}if(a.type===g.POINTER_END&&!(g.EVENT_SUPPORT_TOUCH&&
1<a.touches.length))return a.stopPropagation(),a.preventDefault(),document.removeEventListener(g.POINTER_MOVE,this,!0),document.removeEventListener(g.POINTER_END,this,!0),this.__handle.removeEventListener(g.POINTER_END,this,!0),this.propagate("change",this._value),!1},refresh:function(){this.__handle_width=this.__handle.offsetWidth;this.value=this._value;h.prototype.refresh.call(this)}};f.extendClass(H,h);f.defineClassProperties(H,{value:{set:function(a){var b,c;a<this._range[0]&&(a=this._range[0]);
a>this._range[1]&&(a=this._range[1]);this._value=a;var e=this.__handle_width/2,d=0,d=window.deviceConfiguration.os===o.OS_BLACK_BERRY?(this.__handle_height-this.__handle_delta)/2:(this.__handle_width-this.__handle_delta)/2;0===this._orientation?(c=this.view.offsetWidth,b=Math.floor((a-this._range[0])*c/(this._range[1]-this._range[0]))-e,s?m(this.__handle,"translate3d("+b+"px,-"+d+"px,0)"):m(this.__handle,"translate("+b+"px,-"+d+"px)"),this.view.style.backgroundSize=b+e+"px 10px"):(b=this.view.offsetHeight,
c=Math.floor((a-this._range[0])*b/(this._range[1]-this._range[0]))-e,s?m(this.__handle,"translate3d(-"+d+"px,"+c+"px,0)"):m(this.__handle,"translate(-"+d+"px,"+c+"px)"),this.view.style.backgroundSize="10px "+(c+e)+"px")},get:function(){return this._value}},range:{set:function(a){if(f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&!(a[0]===a[1]||a[0]>a[1]))this._range[0]=a[0],this._range[1]=a[1],this.value=this._value},get:function(){return this._range.slice()}},orientation:{set:function(a){a!==
H.HORIZONTAL&&a!==H.VERTICAL||(this._orientation=a,0===this._orientation?(this.removeClassName("vertical"),this.addClassName("horizontal")):(this.addClassName("vertical"),this.removeClassName("horizontal")),this.value=this._value)},get:function(){return this._orientation}},size:{set:function(a){a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])&&(this._size[0]=a[0],this._size[1]=a[1],this.view&&(this._updateSize(),this.value=this._value))},get:function(){this.view&&this.view.parentNode&&
(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});p.Slider=H;R.prototype={_src:null,destructor:function(){this.view&&(this.view.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=");h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this.view.ondragstart=function(a){a.preventDefault();return!1};this.view.src?this._src=this.view.getAttribute("src"):this.view.src=this._src;this.view.setAttribute("width",
"100%");this.view.setAttribute("height","100%")}};f.extendClass(R,h);f.defineClassProperties(R,{src:{set:function(a){f.isString(a)&&(this._src=a,this.view&&(this.view.src=this._src))},get:function(){return this._src}},size:{set:function(a){if(f.isArray(a)||2===a.length||f.isNumber(a[0])&&f.isNumber(a[1]))this.view&&(this.view.setAttribute("width",a[0]),this.view.setAttribute("height",a[1])),this._size[0]=a[0],this._size[1]=a[1],this._updateSize()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=
this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});p.ImageView=R;C.TEXT="text";C.PASSWORD="password";C.SEARCH="search";C.prototype={_text_field:null,_clear_button:null,_value:"",_placeholder:"type ...",_type:C.TEXT,destructor:function(){this._text_field.removeEventListener("focus",this);this._text_field.removeEventListener("blur",this);this._text_field.removeEventListener("change",this);this._text_field.removeEventListener("input",this);this._clear_button&&this.nodeUnbind(this._clear_button,
g.POINTER_START,"cleanData");delete this._text_field;h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this._text_field=this.view.querySelector("input");this._text_field.name=this.id;(this._clear_button=this.view.querySelector(".clear_button"))&&this.nodeBind(this._clear_button,g.POINTER_START,"cleanData");this.type=this._type;this.value=this._value;this.placeholder=this._placeholder;this._text_field.addEventListener("focus",this);this._text_field.addEventListener("blur",
this);this._text_field.addEventListener("change",this);this._text_field.addEventListener("input",this)},cleanData:function(){this._value=this._text_field.value="";this._activateDelete(!1);this.propertyChange();this.propagate("continuous_change",this._value);this.propagate("change",this._value)},changeData:function(){(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1)},_activateDelete:function(a){this._clear_button&&(a?f.setElementVisibility(this._clear_button,!0):
f.setElementVisibility(this._clear_button,!1))},onkeydown:function(a){var a=fixEvent(a),b=a.target;if(a.keyCode===TAB||a.keyCode===ENTER)return b.blur(),!1},setFocus:function(){this._text_field.focus()},setBlur:function(){this._text_field.blur()},setPointerEvents:function(a){this._text_field.style.pointerEvents=a?"none":"auto"},handleEvent:function(a){function b(a){a.target===c.view||a.target===c._text_field||(a.target===c._clear_button?(c.cleanData(),a.stopPropagation(),a.preventDefault()):(document.removeEventListener(g.POINTER_START,
b,!0),c.setBlur()))}var c=this;"change"===a.type?(this.changeData(),this.propertyChange(),this.propagate("change",this._value)):"input"===a.type?(this.changeData(),this.propertyChange(),this.propagate("continuous_change",this._value)):"focus"===a.type?(this.addClassName("focus"),(this._value=this._text_field.value)?this._activateDelete(!0):this._activateDelete(!1),document.addEventListener(g.POINTER_START,b,!0)):"blur"===a.type&&(this.removeClassName("focus"),this._activateDelete(!1),window.scrollTo(0,
0))}};f.extendClass(C,h);f.defineClassProperties(C,{value:{set:function(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._value=a;this._text_field&&(this._text_field.value=this._value,!this._value||""===this._value?this._activateDelete(!1):this._activateDelete(!0))},get:function(){return this._value=this._text_field.value}},type:{set:function(a){!(a!==C.TEXT&&a!==C.PASSWORD&&a!==C.SEARCH)&&this.view&&(this.removeClassName(this._type),
this._type=a,this.addClassName(this._type),this._text_field&&(this._type===C.PASSWORD?this._text_field.setAttribute("type","password"):this._type===C.SEARCH?this._text_field.setAttribute("type","search"):this._text_field.setAttribute("type","text")))}},placeholder:{set:function(a){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._placeholder=a;this._text_field&&this._text_field.setAttribute("placeholder",this._placeholder)}}});
p.InputField=C;r.BELOW=0;r.ABOVE=1;r.LEFT=2;r.RIGHT=3;r.prototype={_point_position:null,_has_footer:!1,_has_header:!1,initComponent:function(){h.prototype.initComponent.call(this);this._arrow=this.view.querySelector(".vs_ui_popover >.arrow");this.__show_clb=this._endShowConfiguration},_endShowConfiguration:function(){var a,b,c,e,d;d=this.size;var g=window.innerHeight,h=window.innerWidth;if("undefined"!==typeof this.__direction&&this._point_position){a=this._point_position[0]-d[0]/2;b=this._point_position[1]-
d[1]/2;c=d[0];e=d[1];this.__direction!==r.BELOW&&this.__direction!==r.ABOVE&&this.__direction!==r.RIGHT&&this.__direction!==r.LEFT&&(this.__direction=this._point_position[0]>h/2?r.RIGHT:r.LEFT,this._point_position[1]+e+30<g?this.__direction=r.BELOW:0<this._point_position[1]-e-30&&(this.__direction=r.ABOVE));switch(this.__direction){case r.BELOW:b=b+d[1]/2+15;5>a&&(a=5);a+c>h&&(a=h-c-5);this._arrow.className="arrow top";d=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right=
"5px";this._arrow.style["-webkit-mask-position-x"]=d+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;case r.ABOVE:b=b-d[1]/2-15;5>a&&(a=5);a+c>h&&(a=h-c-5);this._arrow.className="arrow bottom";d=this._point_position[0]-a-15-8;this._arrow.style.left="5px";this._arrow.style.right="5px";this._arrow.style["-webkit-mask-position-x"]=d+"px";this._arrow.style["-webkit-mask-position-y"]="0px";break;case r.RIGHT:a=a-d[0]/2-15;5>b&&(b=5);b+e>g-20&&(b=g-e-20);this._arrow.className="arrow right";
d=e-(this._point_position[1]-b+15)-2;this._arrow.style.left="auto";this._arrow.style.right="-13px";this._arrow.style["-webkit-mask-position-x"]="0px";this._arrow.style["-webkit-mask-position-y"]=d+"px";break;case r.LEFT:a=a+d[0]/2+15,5>b&&(b=5),b+e>g-20&&(b=g-e-20),this._arrow.className="arrow left",d=this._point_position[1]-b-15-2,this._arrow.style.left="-13px",this._arrow.style.right="auto",this._arrow.style["-webkit-mask-position-x"]="0px",this._arrow.style["-webkit-mask-position-y"]=d+"px"}this.position=
(d=f.getElementAbsolutePosition(this.view.parentElement))?[a-d.x,b-d.y]:[a,b];this.size=[c,e]}this.redraw()},show:function(a,b){this.view&&!this._visible&&(this._point_position=a&&f.isArray(a)&&2===a.length&&f.isNumber(a[0])&&f.isNumber(a[1])?a.slice():null,this.__direction=b,this.view.style.setProperty("display","block",null),this.__view_display=void 0,this._show_animation?this._show_animation.process(this,this._show_object,this):this._show_object(),document.addEventListener(g.POINTER_START,this,
!0))},handleEvent:function(a){this.childOf(a.target,this.view)||(a.preventDefault(),a.stopPropagation(),this.hide())},childOf:function(a,b){if(a===b)return!0;for(a=a.parentElement;a;){if(a===b)return!0;a=a.parentElement}return!1},hide:function(){this.view&&(h.prototype.hide.call(this),document.removeEventListener(g.POINTER_START,this,!0),this.view.style.display="none")}};f.extendClass(r,h);f.defineClassProperties(r,{hasFooter:{set:function(a){this._has_footer=a?!0:!1;this.view&&this._has_footer&&
this.addClassName("withFooter");this.view&&!this._has_footer&&this.removeClassName("withFooter")},get:function(){return this._has_footer}},hasHeader:{set:function(a){this._has_header=a?!0:!1;this.view&&this._has_header&&this.addClassName("withHeader");this.view&&!this._has_header&&this.removeClassName("withHeader")},get:function(){return this._has_header}}});p.PopOver=r;n.MODE_IOS=0;n.MODE_ANDROID=1;n.MODE_MEEGO=2;n.MODE_WP7=3;n.MODE_SYMBIAN=4;n.MODE_BLACKBERRY=5;n.prototype={__touch_binding:!1,__is_touched:!1,
_selected:!1,_toggled:!0,_mode:k.MODE_IOS,__toggle_on_view:null,__toggle_off_view:null,__switch_view:null,_text_on:"",_text_off:"",_setSelected:function(a){a?(this.addClassName("selected"),this._selected=!0):(this.removeClassName("selected"),this._selected=!1)},_setToggle:function(a){this.__background_view?a?(this._toggled=!0,this._mode===n.MODE_IOS||this._mode===n.MODE_WP7?(m(this.__background_view,"scale(0, 1)"),m(this.__toggles_view,"translate(0,0)")):(this._mode===n.MODE_ANDROID||this._mode===
n.MODE_MEEGO||this._mode===n.MODE_SYMBIAN||this._mode===n.MODE_BLACKBERRY)&&this.addClassName("on")):(this._toggled=!1,this._mode===n.MODE_IOS||this._mode===n.MODE_WP7?(m(this.__background_view,"scale(1, 1)"),m(this.__toggles_view,"translate(-"+(this.size[0]-this.__width_switch)+"px,0)")):(this._mode===n.MODE_ANDROID||this._mode===n.MODE_MEEGO||this._mode===n.MODE_SYMBIAN||this._mode===n.MODE_BLACKBERRY)&&this.removeClassName("on")):console.warn("vs.ui.Switch.toggled, none initialized comp: "+this.id)},
destructor:function(){this.__touch_binding&&(this.view.removeEventListener(g.POINTER_START,this),this.__touch_binding=!1);h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this.__background_view=this.view.querySelector(".vs_ui_switch >div:first-child");this.__toggles_view=this.view.querySelector(".vs_ui_switch >div:nth-child(2)");this.__toggle_on_view=this.view.querySelector(".vs_ui_switch .toggle_on");this.__toggle_off_view=this.view.querySelector(".vs_ui_switch .toggle_off");
this.__switch_view=this.view.querySelector(".vs_ui_switch .switch");var a=window.deviceConfiguration.os;a==o.OS_IOS?(this._mode=n.MODE_IOS,this.__width_switch=40):a==o.OS_ANDROID?this._mode=n.MODE_ANDROID:a==o.OS_SYMBIAN?this._mode=n.MODE_SYMBIAN:a==o.OS_MEEGO?this._mode=n.MODE_MEEGO:a==o.OS_WP7?(this._mode=n.MODE_WP7,this.__width_switch=23):a==o.OS_BLACK_BERRY?(this._mode=n.MODE_BLACKBERRY,this.__width_switch=20):this.__width_switch=this.__switch_view.offsetWidth;this.__touch_binding||(this.view.addEventListener(g.POINTER_START,
this),this.__touch_binding=!0);this.textOn=this._text_on?this._text_on:"ON";this.textOff=this._text_off?this._text_off:"OFF";this.toggled=this._toggled},_updateSize:function(){var a=this._pos,b=this._size,c;aH=this._autosizing[0];aV=this._autosizing[1];sPosR="auto";this.view.parentNode&&(pWidth=this.view.parentNode.offsetWidth);c=4===aH||1===aH?b[0]+"px":5===aH||7===aH?"auto":2===aH||3===aH||6===aH||0===aH?pWidth?Math.round(100*(b[0]/pWidth))+"%":b[0]+"px":"100%";if(1===aH||3===aH||5===aH||7===aH)sPosR=
pWidth-(a[0]+b[0])+"px";this.view.style.width=c;this.view.style.right=sPosR;this.view.style.bottom="auto";this.view.style.removeProperty("height")},_updatePos:function(){var a=this._pos,b=this._size,c=0,e=0,d="auto",f="auto",g="auto",h=this._autosizing[0],j=this._autosizing[1];this.view.parentNode&&(c=this.view.parentNode.offsetWidth,e=this.view.parentNode.offsetHeight);if(4===h||5===h||6===h||7===h||2===h&&!c)d=a[0]+"px";else if((2===h||0===h)&&c)d=Math.round(100*(a[0]/c))+"%";if(1===h||3===h||5===
h||7===h)g=c-(a[0]+b[0])+"px";if(4===j||5===j||6===j||7===j||2===j&&!e)f=a[1]+"px";else if((2===j||0===j)&&e)f=Math.round(100*(a[1]/e))+"%";this.view.style.left=d;this.view.style.top=f;this.view.style.right=g;this.view.style.bottom="auto"},handleEvent:function(a){if(this._enable)switch(a.preventDefault(),a.type){case g.POINTER_START:if(this.__is_touched)break;if(g.EVENT_SUPPORT_TOUCH&&1<a.touches.length)break;a.stopPropagation();this._setSelected(!0);document.addEventListener(g.POINTER_END,this);
document.addEventListener(g.POINTER_MOVE,this);this.__start_x=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageX:a.pageX;this.__start_y=g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY;this.__is_touched=!0;return!1;case g.POINTER_MOVE:if(!this.__is_touched)break;var b=(g.EVENT_SUPPORT_TOUCH?a.touches[0].pageX:a.pageX)-this.__start_x,c=(g.EVENT_SUPPORT_TOUCH?a.touches[0].pageY:a.pageY)-this.__start_y;if(this._mode===n.MODE_IOS){if(Math.abs(c)<h.MOVE_THRESHOLD&&(this._toggled&&0>b&&b>-this._size[0]||!this._toggled&&
0<b&&b<this._size[0]))return a.stopPropagation(),!1}else if(Math.abs(c)+Math.abs(c)<h.MOVE_THRESHOLD)return a.stopPropagation(),!1;document.removeEventListener(g.POINTER_END,this);document.removeEventListener(g.POINTER_MOVE,this);this.__is_touched=!1;this._setSelected(!1);return!1;case g.POINTER_END:if(!this.__is_touched)break;this.__is_touched=!1;a.stopPropagation();document.removeEventListener(g.POINTER_END,this);document.removeEventListener(g.POINTER_MOVE,this);this._setSelected(!1);this._setToggle(!this._toggled);
this.propagate("change",this._toggled);return!1}}};f.extendClass(n,h);f.defineClassProperties(n,{textOn:{set:function(a){if(this.__toggle_on_view){if("undefined"===typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text_on=a;f.setElementInnerText(this.__toggle_on_view,this._text_on)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_on}},textOff:{set:function(a){if(this.__toggle_off_view){if("undefined"===
typeof a)a="";else if(f.isNumber(a))a=""+a;else if(!f.isString(a)){if(!a.toString)return;a=a.toString()}this._text_off=a;f.setElementInnerText(this.__toggle_off_view,this._text_off)}else console.warn("vs.ui.Switch.textOff, none initialized comp: "+this.id)},get:function(){return this._text_off}},toggled:{set:function(a){var b=this;setTimeout(function(){b._setToggle(a)},10)},get:function(){return this._toggled}}});p.Switch=n;k.NUMBERS={"0":0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};k.MODE_IOS=0;k.MODE_ANDROID=
1;k.MODE_WP7=2;k.MODE_SYMBIAN=3;k.MODE_BLACK_BERRY=4;k.prototype={_mode:k.MODE_IOS,_cell_height:44,_friction:0.0030,_data:null,_slots_elements:null,_current_values:null,_selected_keys:null,_selected_values:null,destructor:function(){this._frame_view.removeEventListener(g.POINTER_START,this,!1);document.removeEventListener(g.POINTER_START,this,!1);document.removeEventListener(g.POINTER_MOVE,this,!1);this._slots_view.innerHTML="";delete this._data;delete this._slots_elements;delete this._frame_view;
delete this._slots_view;delete this._current_values;h.prototype.destructor.call(this)},initComponent:function(){h.prototype.initComponent.call(this);this._data=[];this._slots_elements=[];var a=window.deviceConfiguration.os;this._mode=a==o.OS_ANDROID?k.MODE_ANDROID:a==o.OS_WP7?k.MODE_WP7:a==o.OS_SYMBIAN?k.MODE_SYMBIAN:a==o.OS_BLACK_BERRY?k.MODE_BLACK_BERRY:k.MODE_IOS;this._slots_view=this.view.querySelector(".slots");this._frame_view=this.view.querySelector(".frame");switch(this._mode){case k.MODE_IOS:this._frame_view.addEventListener(g.POINTER_START,
this);this._frame_border_width=0;break;case k.MODE_SYMBIAN:this._frame_view.addEventListener(g.POINTER_START,this);this._frame_border_width=0;break;case k.MODE_WP7:this._frame_view.parentElement.removeChild(this._frame_view);this._cell_height=83;break;case k.MODE_ANDROID:this._frame_view.parentElement.removeChild(this._frame_view);break;case k.MODE_BLACK_BERRY:this._frame_view.addEventListener(g.POINTER_START,this),this._cell_height=50}},removeAllSlots:function(){delete this._data;this._data=[];this._remove_all_slots()},
_remove_all_slots:function(){this._slots_view.innerHTML="";delete this._slots_elements;this._slots_elements=[];this._active_slot=null},_render_slots:function(){for(var a=0;a<this._data.length;a++)this._render_a_slot(a)},_render_a_slot:function(a){var b,c,e,d=this._data[a];if(d){c=0;e=window.deviceConfiguration.os;d.length&&e==o.OS_WP7&&(c=Math.floor(100/d.length));e=document.createElement("ul");e.index=a;c&&f.setElementStyle(e,{width:c+"%"});c="";for(b in d.values)c+="<li>"+d.values[b]+"</li>";e.innerHTML=
c;if(this._mode===k.MODE_ANDROID){b=document.createElement("div");c=this._generate_button(a);b.appendChild(c[0]);var h=document.createElement("div");h.className=d.style;h.appendChild(e);b.appendChild(h);b.appendChild(c[1])}else b=document.createElement("div"),b.className=d.style,b.appendChild(e);this._slots_view.appendChild(b);e.slotPosition=a;e.slotYPosition=0;switch(this._mode){case k.MODE_WP7:e.slotMaxScroll=this.view.clientHeight-e.clientHeight,e.addEventListener(g.POINTER_START,this,!0)}e.style.webkitTransitionTimingFunction=
"cubic-bezier(0, 0, 0.2, 1)";s?m(e,"translate3d(0,0,0)"):m(e,"translate(0,0)");this._slots_elements.push(e);d.defaultValue&&this.scrollToValue(a,d.defaultValue)}},_generate_button:function(a){var b=this._data[a].style.match("readonly"),c=document.createElement("div");b?c.className="button_incr readonly":(c.className="button_incr",c.innerHTML="+",c.slotPosition=a);b||(c.addEventListener(g.POINTER_START,this),c.addEventListener(g.POINTER_END,this),c.addEventListener(g.POINTER_CANCEL,this));var e=document.createElement("div");
b?e.className="button_decr readonly":(e.className="button_decr",e.innerHTML="-",e.slotPosition=a);b||(e.addEventListener(g.POINTER_START,this),e.addEventListener(g.POINTER_END,this),e.addEventListener(g.POINTER_CANCEL,this));return[c,e]},_buttonSelected:function(a){var b=a.target.slotPosition;switch(a.type){case g.POINTER_START:f.addClassName(a.target,"active");break;case g.POINTER_END:var c=this._slots_elements[b],e=c.slotYPosition;f.hasClassName(a.target,"button_decr")?(e+=44,0<e&&(e=0)):(e-=44,
c=this.getSlotMaxScroll(c),e<c&&(e=c));this._scrollTo(b,e);case g.POINTER_CANCEL:f.removeClassName(a.target,"active")}},addSlot:function(a,b,c){b||(b="");var e={};e.values=a;e.style=b;e.defaultValue=c;this._data.push(e);this._render_a_slot(this._data.length-1)},getSelectedValues:function(){if(this._current_values)return this._current_values;var a,b,c,e;this._selected_keys=[];this._selected_values=[];for(c=0;c<this._slots_elements.length;c++)if(a=this._slots_elements[c])for(e in a.removeEventListener("webkitTransitionEnd",
this,!1),a.style.webkitTransitionDuration="0",b=this.getSlotMaxScroll(a),0<a.slotYPosition?this._setPosition(c,0):a.slotYPosition<b&&this._setPosition(c,b),a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[c].values){if(b==a){this._selected_keys.push(e);this._selected_values.push(this._data[c].values[e]);break}b++}return this._current_values={keys:this._selected_keys,values:this._selected_values}},_getSelectedValues:function(){if(this._current_values)return this._current_values;var a,
b,c,e;this._selected_keys=[];this._selected_values=[];for(c=0;c<this._slots_elements.length;c++)if(a=this._slots_elements[c])for(e in a=-Math.round(a.slotYPosition/this._cell_height),b=0,this._data[c].values){if(b==a){this._selected_keys.push(e);this._selected_values.push(this._data[c].values[e]);break}b++}return this._current_values={keys:this._selected_keys,values:this._selected_values}},scrollToValue:function(a,b){var c,e;e=this._slots_elements[a];var d=this._data[a];if(!e||!d)return!1;e.removeEventListener("webkitTransitionEnd",
this,!1);e.style.webkitTransitionDuration="0";e=0;for(c in d.values){if(c==b)return c=e*this._cell_height,this._setPosition(a,c),!0;e-=1}return!1},_setPosition:function(a,b){delete this._current_values;var c=this._slots_elements[a];c.slotYPosition=b;s?m(c,"translate3d(0,"+b+"px,0)"):m(c,"translate(0,"+b+"px)")},_scrollTo:function(a,b,c){var e=this._slots_elements[a];e.style.webkitTransitionDuration=c?c+"ms":"100ms";this._setPosition(a,b?b:0);a=this.getSlotMaxScroll(e);0<e.slotYPosition||e.slotYPosition<
a?e.addEventListener("webkitTransitionEnd",this,!1):(this._delegate&&this._delegate.pickerViewSelectRow&&this._delegate.pickerViewSelectRow(this),this.propagate("change",this._getSelectedValues()),this.propertyChange())},handleEvent:function(a){if(this._mode===k.MODE_ANDROID)this._buttonSelected(a);else switch(a.type){case g.POINTER_START:this._scrollStart(a);break;case g.POINTER_MOVE:this._scrollMove(a);break;case g.POINTER_END:this._scrollEnd(a);break;case "webkitTransitionEnd":this._backWithinBoundaries(a)}},
_scrollStart:function(a){a.preventDefault();a.stopPropagation();var b=g.EVENT_SUPPORT_TOUCH?a.targetTouches[0]:a;this._active_slot=void 0;var c=this._getComputedStyle(this._frame_view);this._frame_border_width=c?parseInt(c["border-left-width"]):0;switch(this._mode){case k.MODE_IOS:case k.MODE_SYMBIAN:case k.MODE_BLACK_BERRY:var c=0,e=f.getBoundingClientRect(this._slots_view);this._mode==k.MODE_BLACK_BERRY&&(c=8);for(var c=b.clientX-e.left-this._frame_border_width-c,d=e=0;d<this._slots_elements.length;d++)if(e+=
this._slots_elements[d].offsetWidth,c<e){this._active_slot=d;break}break;case k.MODE_WP7:this._active_slot=a.currentTarget.index,f.addClassName("dragging")}if("undefined"!==typeof this._active_slot){if(this._data[this._active_slot].style.match("readonly"))return document.removeEventListener(g.POINTER_MOVE,this,!0),document.removeEventListener(g.POINTER_END,this,!0),!1;c=this._slots_elements[this._active_slot];c.slotMaxScroll=this.getSlotMaxScroll(c);c.removeEventListener("webkitTransitionEnd",this,
!1);c.style.webkitTransitionDuration="0";s&&(e=da(c),e=(new WebKitCSSMatrix(e)).m42,e!=c.slotYPosition&&this._setPosition(this._active_slot,e));this.startY=b.clientY;this.scrollStartY=c.slotYPosition;this.scrollStartTime=a.timeStamp;document.addEventListener(g.POINTER_MOVE,this,!0);document.addEventListener(g.POINTER_END,this,!0);switch(this._mode){case k.MODE_WP7:case k.MODE_BLACK_BERRY:this.__timer&&(clearTimeout(this.__timer),this.__timer=0),this.__elem_to_hide&&this.__elem_to_hide!=c&&(f.removeClassName(this.__elem_to_hide.parentElement,
"visible"),this.__elem_to_hide=null),f.addClassName(c.parentElement,"visible")}return!0}},_scrollMove:function(a){a.preventDefault();a.stopPropagation();var b=g.EVENT_SUPPORT_TOUCH?a.targetTouches[0]:a,c=b.clientY-this.startY,d=this._slots_elements[this._active_slot];if(0<d.slotYPosition||d.slotYPosition<d.slotMaxScroll)c/=2;this._setPosition(this._active_slot,d.slotYPosition+c);this.startY=b.clientY;80<a.timeStamp-this.scrollStartTime&&(this.scrollStartY=d.slotYPosition,this.scrollStartTime=a.timeStamp)},
_scrollEnd:function(a){document.removeEventListener(g.POINTER_MOVE,this,!0);document.removeEventListener(g.POINTER_END,this,!0);var b=this._slots_elements[this._active_slot],c,d=this;if(b){switch(this._mode){case k.MODE_BLACK_BERRY:case k.MODE_WP7:b.parentElement&&(this.__elem_to_hide=b,this.__timer=setTimeout(function(){f.removeClassName(d.__elem_to_hide.parentElement,"visible");d.__elem_to_hide=null;d.removeClassName("dragging")},1E3))}if(0<b.slotYPosition||b.slotYPosition<b.slotMaxScroll)return this._scrollTo(this._active_slot,
0<b.slotYPosition?0:b.slotMaxScroll),!1;c=b.slotYPosition-this.scrollStartY;if(c<this._cell_height/1.5&&c>-this._cell_height/1.5)return b.slotYPosition%this._cell_height&&this._scrollTo(this._active_slot,Math.round(b.slotYPosition/this._cell_height)*this._cell_height,100),!1;a=2*c/(a.timeStamp-this.scrollStartTime)/this._friction;c=this._friction/2*a*a;0>a&&(a=-a,c=-c);c=b.slotYPosition+c;0<c?(c/=2,a/=3,c>this.view.clientHeight/4&&(c=this.view.clientHeight/4)):c<b.slotMaxScroll?(c=(c-b.slotMaxScroll)/
2+b.slotMaxScroll,a/=3,c<b.slotMaxScroll-this.view.clientHeight/4&&(c=b.slotMaxScroll-this.view.clientHeight/4)):c=Math.round(c/this._cell_height)*this._cell_height;this._scrollTo(this._active_slot,Math.round(c),Math.round(a));return!0}},getSlotMaxScroll:function(a){switch(this._mode){case k.MODE_IOS:return this.view.clientHeight-a.clientHeight-86;case k.MODE_SYMBIAN:return this.view.clientHeight-a.clientHeight-80;case k.MODE_BLACK_BERRY:return this.view.clientHeight-a.clientHeight-93;case k.MODE_WP7:return this.view.clientHeight-
a.clientHeight-103;case k.MODE_ANDROID:return this.view.clientHeight-a.clientHeight-121}return 0},_backWithinBoundaries:function(a){a=a.target;a.removeEventListener("webkitTransitionEnd",this,!1);slotMaxScroll=this.getSlotMaxScroll(a);this._scrollTo(a.slotPosition,0<a.slotYPosition?0:slotMaxScroll,150);return!1}};f.extendClass(k,h);f.defineClassProperties(k,{delegate:{set:function(a){this._delegate=a}},data:{set:function(a){var b,c,d,g;if(f.isArray(a)){this.removeAllSlots();for(g=0;g<a.length;g++)b=
a[g],c=b.values,d=b.style,b=b.defaultValue,c&&this.addSlot(c,d,b)}}},selectedKeys:{get:function(){this._current_values||this.getSelectedValues();return this._selected_keys}},selectedValues:{get:function(){this._current_values||this.getSelectedValues();return this._selected_values}}});p.Picker=k;S.prototype={_src:null};f.extendClass(S,h);f.defineClassProperties(S,{src:{set:function(a){f.isString(a)&&(this._image_loaded=!1,this._src=a,this._image_data.src=this._src)},get:function(){return this._src}},
size:{set:function(a){if(f.isArray(a)||2===a.length||f.isNumber(a[0])&&f.isNumber(a[1]))this._size[0]=a[0],this._size[1]=a[1],this.view&&(this.view.setAttribute("width",this._size[0]),this.view.setAttribute("height",this._size[1])),this._updateSize()},get:function(){this.view&&this.view.parentNode&&(this._size[0]=this.view.offsetWidth,this._size[1]=this.view.offsetHeight);return this._size.slice()}}});p.SVGView=S;K.DEFAULT_TYPE="default";K.BAR_TYPE="bar";K.prototype={_type:K.DEFAULT_TYPE,_items:null,
_selected_index:0,_div_list:null,destructor:function(){this._cleanButtons();h.prototype.destructor.call(this)},_cleanButtons:function(){if(this.view)for(this.view.innerHTML="";this._div_list.length;)this._div_list[0].removeEventListener(g.POINTER_START,this),this._div_list.remove(0)},_renderButtons:function(){if(this.view){this._cleanButtons();var a="",b=window.deviceConfiguration.os;this._items.length&&b==o.OS_WP7&&(a=Math.floor(100/this._items.length));for(var b=0,c=this._items.length;b<c;b++){var d=
document.createElement("div");d._index=b;d.innerHTML=this._items[b];a&&f.setElementStyle(d,{width:a+"%"});d.addEventListener(g.POINTER_START,this);this._div_list.push(d);this.view.appendChild(d)}}},initComponent:function(){h.prototype.initComponent.call(this);this._items=[];this._div_list=[];this._renderButtons();this.selectedIndex=this._selected_index;this.type=this._type},handleEvent:function(a){var b;if(a.type===g.POINTER_START&&!(g.EVENT_SUPPORT_TOUCH&&1<a.touches.length)){b=a.target;b.tagName||
(b=b.parentElement);if(this._selected_index===b._index)return!1;a.stopPropagation();a.preventDefault();this.selectedIndex=b._index;this.propagate("select",{index:this._selected_index,item:this._items[this._selected_index]});this.propertyChange();return!1}}};f.extendClass(K,h);f.defineClassProperties(K,{items:{set:function(a){var b,c;if(f.isArray(a)&&a.length){this._items.removeAll();b=0;for(c=a.length;b<c;b++)a[b]&&this._items.push(a[b].toString());this._renderButtons();this.selectedIndex=this._selected_index}},
get:function(){return this._text}},selectedIndex:{set:function(a){if(f.isNumber(a)&&!(0>a||a>=this._div_list.length)){var b=this._div_list[this._selected_index];b&&f.removeClassName(b,"selected");this._selected_index=a;(b=this._div_list[this._selected_index])&&f.addClassName(b,"selected")}},get:function(){return this._selected_index}},type:{set:function(a){f.isString(a)&&(this._type&&this.removeClassName(this._type),this._type=a,this.addClassName(this._type))},get:function(){return this._type}}});
p.SegmentedButton=K;h.prototype.html_template="<div class='vs_ui_view' x-hag-hole='children'></div>";M.prototype.html_template="<div class='vs_ui_splitview' x-hag-hole='children'></div>";j.prototype.html_template="<div class='vs_ui_scrollview'>  <div x-hag-hole='top_bar'></div>  <div class='content' x-hag-hole='children'></div>  <div x-hag-hole='bottom_bar'></div></div>";v.prototype.html_template="<div class='vs_ui_scrollimageview'><img class='content'/></div>";N.prototype.html_template="<textarea class='vs_ui_textarea'></textarea>";
w.prototype.html_template="<div class='vs_ui_button'><div></div></div>";t.prototype.html_template="<div class='vs_ui_list'><ul x-hag-hole='item_children'/></div>";G.prototype.html_template="<div class='vs_ui_navbar blue_ios_style' x-hag-hole='children'></div>";d.prototype.html_template="<div class='vs_ui_toolbar black_ios_style' x-hag-hole='children'></div>";A.prototype.html_template="<div class='vs_ui_canvas'><canvas class='canvas_inner'></canvas></div>";B.prototype.html_template="<div class='vs_ui_progressbar'><div></div></div>";
Q.prototype.html_template="<div class='vs_ui_textlabel'></div>";O.prototype.html_template="<div class='vs_ui_radiobutton'><fieldset x-hag-hole='item_children' /></div>";z.prototype.html_template="<div class='vs_ui_combobox'></div>";P.prototype.html_template="<div class='vs_ui_checkbox'><fieldset x-hag-hole='item_children' /></div>";H.prototype.html_template="<div class='vs_ui_slider'><div class='handle'></div></div>";R.prototype.html_template="<img class='vs_ui_imageview'></img>";C.prototype.html_template=
"<div class='vs_ui_inputfield'><input type='text' value='' placeholder='type ...' incremental='incremental'/><div class='clear_button'/></div>";r.prototype.html_template="<div class='vs_ui_popover'>  <div class='header' x-hag-hole='header'></div>  <div class='center' x-hag-hole='children'></div>  <div class='footer' x-hag-hole='footer'></div>  <div class='arrow'></div></div>";n.prototype.html_template="<div class='vs_ui_switch'>  <div></div>  <div>    <div class='toggle_on'></div>    <div class='toggle_off'></div>     <div class='switch'></div>   </div></div>";
k.prototype.html_template="<div class='vs_ui_picker'>  <div class='slots'></div>  <div class='frame'></div></div>";K.prototype.html_template="<div class='vs_ui_segmentedbutton'></div>";S.prototype.html_template="<embed class='vs_ui_svgview'></embed>";f.defineProperty(document,"preventScroll",{get:function(){return document._preventScroll},set:function(a){(document._preventScroll=a)?(document.addEventListener("touchstart",L,!1),document.addEventListener("touchmove",L,!1),document.addEventListener("scroll",
L,!1),window.scrollTo(0,0)):(document.removeEventListener("touchstart",L,!1),document.removeEventListener("touchmove",L,!1),document.removeEventListener("scroll",L,!1))}});return p});
